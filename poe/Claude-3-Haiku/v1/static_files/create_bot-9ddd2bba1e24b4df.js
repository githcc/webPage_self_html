(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8775],{35614:function(e,a,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/create_bot",function(){return l(98512)}])},53387:function(e,a,l){"use strict";var n,t,i,r,o,s,d,u,m,c,g,_,p,b,k,y,v,h,f,F,S,K,w,N,B,L;l.r(a);let C={fragment:{argumentDefinitions:[n={defaultValue:null,kind:"LocalArgument",name:"allowRelatedBotRecommendations"},t={defaultValue:null,kind:"LocalArgument",name:"apiKey"},i={defaultValue:null,kind:"LocalArgument",name:"apiUrl"},r={defaultValue:null,kind:"LocalArgument",name:"baseBotId"},o={defaultValue:null,kind:"LocalArgument",name:"customMessageLimit"},s={defaultValue:null,kind:"LocalArgument",name:"description"},d={defaultValue:null,kind:"LocalArgument",name:"displayName"},u={defaultValue:null,kind:"LocalArgument",name:"handle"},m={defaultValue:null,kind:"LocalArgument",name:"hasMarkdownRendering"},c={defaultValue:null,kind:"LocalArgument",name:"hasSuggestedReplies"},g={defaultValue:null,kind:"LocalArgument",name:"introduction"},_={defaultValue:null,kind:"LocalArgument",name:"isApiBot"},p={defaultValue:null,kind:"LocalArgument",name:"isPrivateBot"},b={defaultValue:null,kind:"LocalArgument",name:"isPromptPublic"},k={defaultValue:null,kind:"LocalArgument",name:"knowledgeSourceIds"},y={defaultValue:null,kind:"LocalArgument",name:"messagePriceCc"},v={defaultValue:null,kind:"LocalArgument",name:"model"},h={defaultValue:null,kind:"LocalArgument",name:"profilePictureUrl"},f={defaultValue:null,kind:"LocalArgument",name:"prompt"},F={defaultValue:null,kind:"LocalArgument",name:"shouldCiteSources"},S={defaultValue:null,kind:"LocalArgument",name:"temperature"}],kind:"Fragment",metadata:null,name:"CreateBotMain_poeBotCreate_Mutation",selections:[{alias:null,args:K=[{kind:"Variable",name:"allowRelatedBotRecommendations",variableName:"allowRelatedBotRecommendations"},{kind:"Variable",name:"apiKey",variableName:"apiKey"},{kind:"Variable",name:"apiUrl",variableName:"apiUrl"},{kind:"Variable",name:"baseBotId",variableName:"baseBotId"},{kind:"Variable",name:"customMessageLimit",variableName:"customMessageLimit"},{kind:"Variable",name:"description",variableName:"description"},{kind:"Variable",name:"displayName",variableName:"displayName"},{kind:"Variable",name:"handle",variableName:"handle"},{kind:"Variable",name:"hasMarkdownRendering",variableName:"hasMarkdownRendering"},{kind:"Variable",name:"hasSuggestedReplies",variableName:"hasSuggestedReplies"},{kind:"Variable",name:"introduction",variableName:"introduction"},{kind:"Variable",name:"isApiBot",variableName:"isApiBot"},{kind:"Variable",name:"isPrivateBot",variableName:"isPrivateBot"},{kind:"Variable",name:"isPromptPublic",variableName:"isPromptPublic"},{kind:"Variable",name:"knowledgeSourceIds",variableName:"knowledgeSourceIds"},{kind:"Variable",name:"messagePriceCc",variableName:"messagePriceCc"},{kind:"Variable",name:"model",variableName:"model"},{kind:"Variable",name:"profilePicture",variableName:"profilePictureUrl"},{kind:"Variable",name:"promptPlaintext",variableName:"prompt"},{kind:"Variable",name:"shouldCiteSources",variableName:"shouldCiteSources"},{kind:"Variable",name:"temperature",variableName:"temperature"}],concreteType:"PoeBotCreate",kind:"LinkedField",name:"poeBotCreate",plural:!1,selections:[w={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},N={alias:null,args:null,kind:"ScalarField",name:"statusMessage",storageKey:null},{alias:null,args:null,concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[B={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},L={alias:null,args:null,kind:"ScalarField",name:"viewerIsFollower",storageKey:null},{args:null,kind:"FragmentSpread",name:"BotHeader_bot"}],storageKey:null}],storageKey:null}],type:"MutationRoot",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[v,d,u,f,b,g,s,h,i,t,_,m,c,p,S,r,o,k,y,F,n],kind:"Operation",name:"CreateBotMain_poeBotCreate_Mutation",selections:[{alias:null,args:K,concreteType:"PoeBotCreate",kind:"LinkedField",name:"poeBotCreate",plural:!1,selections:[w,N,{alias:null,args:null,concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[B,L,{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"limitedAccessType",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shouldHideLimitedAccessTag",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"translatedBotTags",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"deletionState",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"picture",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"localName",storageKey:null}],type:"LocalBotImage",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],type:"URLBotImage",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"handle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"canUserAccessBot",storageKey:null},{kind:"TypeDiscriminator",abstractKey:"__isNode"}],storageKey:null}],storageKey:null}]},params:{id:"4fedb0162a5d095ae4c5dcd2b8efdb6694df08a4d7e8901e6699ce9b779e22a2",metadata:{},name:"CreateBotMain_poeBotCreate_Mutation",operationKind:"mutation",text:null}};C.hash="be59f97e1173df16e8215a15223c9e7c",a.default=C},44036:function(e,a,l){"use strict";l.r(a);let n={argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"messageId"}],kind:"Fragment",metadata:null,name:"CreateBotMain_queryRoot",selections:[{alias:null,args:null,kind:"ScalarField",name:"randomizedAvailableBotHandle",storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"enableBotEditReminder",args:[{kind:"Literal",name:"gateName",value:"poe_web_should_show_bot_profile_edit_reminder"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_should_show_bot_profile_edit_reminder")'},{alias:"privateBotsOnProfileGateEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_show_private_bots_on_viewer_profile"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_show_private_bots_on_viewer_profile")'},{args:null,kind:"FragmentSpread",name:"BotInfoForm_viewer"}],storageKey:null},{alias:null,args:[{kind:"Variable",name:"messageId",variableName:"messageId"}],concreteType:"Message",kind:"LinkedField",name:"message",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null}],type:"QueryRoot",abstractKey:null};n.hash="fa98d41977ac02c2700c962284c4e4ba",a.default=n},10621:function(e,a,l){"use strict";var n,t,i;l.r(a);let r={fragment:{argumentDefinitions:n=[{defaultValue:null,kind:"LocalArgument",name:"messageId"}],kind:"Fragment",metadata:null,name:"createBotIndexPageQuery",selections:[{args:t=[{kind:"Variable",name:"messageId",variableName:"messageId"}],kind:"FragmentSpread",name:"CreateBotMain_queryRoot"}],type:"QueryRoot",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"createBotIndexPageQuery",selections:[{alias:null,args:null,kind:"ScalarField",name:"randomizedAvailableBotHandle",storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"enableBotEditReminder",args:[{kind:"Literal",name:"gateName",value:"poe_web_should_show_bot_profile_edit_reminder"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_should_show_bot_profile_edit_reminder")'},{alias:"privateBotsOnProfileGateEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_show_private_bots_on_viewer_profile"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_show_private_bots_on_viewer_profile")'},{alias:null,args:null,concreteType:"Bot",kind:"LinkedField",name:"botsAllowedForUserCreation",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"model",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"baseModelDisplayName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"limitedAccessType",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxTokensForPrompt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxTokensForIntroduction",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"modelDefaultTemperature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"modelMaxTemperature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"botId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isImageGen",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showAdvancedFieldsAsBaseBot",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shouldHideLimitedAccessTag",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"MessagePointLimit",kind:"LinkedField",name:"messagePointLimit",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayMessagePointPrice",storageKey:null},i],storageKey:null}],storageKey:null},{alias:"enablePromptBotCustomTemperature",args:[{kind:"Literal",name:"gateName",value:"poe_enable_prompt_bot_custom_temperature"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_prompt_bot_custom_temperature")'},{alias:"decoupleBotHandleAndName",args:[{kind:"Literal",name:"gateName",value:"poe_web_enable_bot_handle_display_name_decoupling"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_enable_bot_handle_display_name_decoupling")'},{alias:"disableKBForMixtral",args:[{kind:"Literal",name:"gateName",value:"poe_disable_knowledge_base_for_mixtral"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_disable_knowledge_base_for_mixtral")'},{alias:null,args:null,kind:"ScalarField",name:"isEnrolledInRevshare",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEnrolledInMessageRevshare",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shouldSeeRevshareEntryPoints",storageKey:null},{alias:"maxMessageRevshareMarkupCC",args:[{kind:"Literal",name:"gateName",value:"poe_message_revshare_max_markup"}],kind:"ScalarField",name:"integerGate",storageKey:'integerGate(gateName:"poe_message_revshare_max_markup")'},{alias:"showKnowledgeBaseSection",args:[{kind:"Literal",name:"gateName",value:"poe_enable_knowledge_sources"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_knowledge_sources")'},{alias:"canEditMessagePrice",args:[{kind:"Literal",name:"gateName",value:"poe_revshare_message_prices"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_revshare_message_prices")'},{alias:"shouldSeeMessageRevshareChanges",args:[{kind:"Literal",name:"gateName",value:"poe_enable_message_revshare"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_message_revshare")'},{alias:"inChatRecommendationsEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_allows_in_chat_recommendations"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_allows_in_chat_recommendations")'},{alias:"androidCreatorsHubMinBuildNumber",args:[{kind:"Literal",name:"gateName",value:"poe_android_creators_hub_min_build_number"}],kind:"ScalarField",name:"integerGate",storageKey:'integerGate(gateName:"poe_android_creators_hub_min_build_number")'},{alias:"iosCreatorsHubMinBuildNumber",args:[{kind:"Literal",name:"gateName",value:"poe_ios_creators_hub_min_build_number"}],kind:"ScalarField",name:"integerGate",storageKey:'integerGate(gateName:"poe_ios_creators_hub_min_build_number")'},{alias:"preLaunchMessageRevshare",args:[{kind:"Literal",name:"gateName",value:"poe_message_revshare_pre_launch_access"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_message_revshare_pre_launch_access")'},{alias:null,args:null,kind:"ScalarField",name:"knowledgeBaseSizeLimit",storageKey:null},{alias:"hasDisclaimer",args:[{kind:"Literal",name:"gateName",value:"poe_kbppb_description_include_disclaimer"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_kbppb_description_include_disclaimer")'},i],storageKey:null},{alias:null,args:t,concreteType:"Message",kind:"LinkedField",name:"message",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},i],storageKey:null}]},params:{id:"5de821b416154f7d3dbb6ca4cab5c20277df0c968e6b80a950a14446c7b91b9f",metadata:{},name:"createBotIndexPageQuery",operationKind:"query",text:null}};r.hash="c748730d97b76d53adfe551f8d2afc22",a.default=r},98512:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return C}});var n,t,i=l(85893),r=l(11163),o=l(22120);l(44311);var s=l(41664),d=l.n(s),u=l(67294),m=l(22578),c=l(2197),g=l(37650),_=l(74929),p=l(80393),b=l(50530),k=l(61794),y=l(37115);(n=t||(t={})).success="success",n.handle_already_taken="handle_already_taken",n.temperature_invalid="temperature_invalid",n.api_bot_temperature_not_supported="api_bot_temperature_not_supported",n.display_name_too_long="display_name_too_long",n.display_name_empty="display_name_empty",n.other_failure="other_failure",n.invalid_knowledge_source="invalid_knowledge_source",n.bot_content_moderated="bot_content_moderated",n.introduction_exceed_token_limit="introduction_exceed_token_limit",n.prompt_exceed_token_limit="prompt_exceed_token_limit",n.knowledge_base_too_large="knowledge_base_too_large",n.creator_nux_incomplete="creator_nux_incomplete";var v=t,h=l(75704),f=l(35426),F=l(75256);let useAddBot=function(){let{privateBotsOnProfileGateEnabled:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{t:a}=(0,o.$G)(),[n,t]=(0,u.useState)(!1),[i]=(0,m.useMutation)(l(53387)),s=(0,c.ZP)(),d=(0,r.useRouter)(),p=(0,y.F)(),h=(0,u.useCallback)(l=>{let{baseBot:n,name:t,handle:r,prompt:o,promptIsPublic:u,introduction:m,description:k,profilePictureUrl:y,apiUrl:h,apiKey:f,isApiBot:S,hasMarkdownRendering:K,hasSuggestedReplies:w,botIsPublic:N,hasCustomTemperature:B,temperature:L,baseBotId:C,hasCustomMessageLimit:V,customMessageLimit:P,knowledgeSourcesToAdd:A,messagePrice:M,shouldCiteSources:G,allowRelatedBotRecommendations:R}=l;return new Promise((l,x)=>{let I=h?new URL(h).toString():null;if((null==A?void 0:A.some(e=>!("knowledgeSourceId"in e)&&"pending"===e.uploadPromise.state))&&!confirm(a("Some of your knowledge sources are still uploading. Are you sure you want to create this bot without them?"))){x();return}i({variables:{model:n,displayName:t,handle:r,prompt:o,isPromptPublic:u,introduction:m,description:k,profilePictureUrl:y,apiUrl:I,apiKey:f,isApiBot:S,hasMarkdownRendering:K,hasSuggestedReplies:w,isPrivateBot:void 0!==N&&!N,temperature:B?L:null,baseBotId:C,customMessageLimit:V?P:null,knowledgeSourceIds:null==A?void 0:A.map(e=>"knowledgeSourceId"in e&&e.knowledgeSourceId).filter(b.h),messagePriceCc:M?1e4*M:null,shouldCiteSources:G,allowRelatedBotRecommendations:R},onCompleted:e=>{let{poeBotCreate:a}=e;a.status===v.success?(0,_.pE)(p)?setTimeout(()=>{(0,F.o)(r,a.statusMessage),l()},750):d.push("/".concat(r)).then(()=>{setTimeout(()=>s({content:a.statusMessage,type:c.pC.success}),200)}):(s({content:a.statusMessage,type:c.pC.error}),x())},onError:()=>{s({content:a("Create bot failed due to an unexpected error on the Poe server."),type:c.pC.error}),x()},updater:(a,l)=>{var n;(null===(n=l.poeBotCreate.bot)||void 0===n?void 0:n.id)&&((0,g.Fo)(a,l.poeBotCreate.bot.id),l.poeBotCreate.bot.viewerIsFollower&&e&&(0,g.MD)(a,l.poeBotCreate.bot.id))}})})},[i,s,d,a,p,e]);return{isLoading:n,addBot:(0,u.useCallback)(async e=>{let{image:l,...n}=e;try{t(!0);let e=await (0,k.W)(l);await h({...n,profilePictureUrl:e})}catch(e){if(e instanceof Error)throw s({content:e.message,type:c.pC.error}),e;e&&s({content:a("Create bot failed due to an unexpected error on the Poe server."),type:c.pC.error})}finally{t(!1)}},[h,s,a])}};var creation_CreateBotMain=e=>{let{queryRoot:a,defaultToApiTab:n}=e,{t}=(0,o.$G)(),{randomizedAvailableBotHandle:r,viewer:s,message:c}=(0,m.useFragment)(l(44036),a),{addBot:g,isLoading:_}=useAddBot({privateBotsOnProfileGateEnabled:s.privateBotsOnProfileGateEnabled}),b=(0,u.useMemo)(p._,[]);return(0,i.jsxs)(i.Fragment,{children:[_&&(0,i.jsx)(h.LK,{}),(0,i.jsx)(f.Z,{onSubmit:g,viewer:s,prompt:null==c?void 0:c.text,handle:r,submitText:t("Create bot"),allowSwitchingBotType:!0,isApiBot:n,apiKey:b,disclaimer:(0,i.jsxs)(o.cC,{i18nKey:"createBotMainDisclaimer",children:["Creation and use of bots is subject to the"," ",(0,i.jsx)(d(),{href:"/tos",target:"_blank",children:"Poe Terms of Service"}),"."]}),shouldShowEditReminder:s.enableBotEditReminder,bot:null,isSubmitting:_})]})},S=l(81360),K=l(42050),w=l(50515),N=l(20675),B=l(64737);let L=(0,N.T)(e=>{let{t:a}=(0,o.$G)(),l=(0,r.useRouter)();return(0,i.jsxs)(K.Z,{header:(0,i.jsx)(S.Z,{title:a("Create a bot")}),children:[(0,i.jsx)(w.Z,{title:(0,B.p)(a("Create a bot"))}),(0,i.jsx)(creation_CreateBotMain,{queryRoot:e,defaultToApiTab:!!l.query.api||!!l.query.server})]})},{query:l(10621),variables:e=>{let a=e.prompt_message;if(!a||Array.isArray(a))return{messageId:null};let l=parseInt(a);return isNaN(l)?{messageId:null}:{messageId:l}}},{loggedInOnly:!0});var C=L}},function(e){e.O(0,[1664,5675,6835,3974,7536,6793,9209,5566,1142,7840,1367,9774,2888,179],function(){return e(e.s=35614)}),_N_E=e.O()}]);