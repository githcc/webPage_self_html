(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8220],{8787:function(e,a,n){"use strict";var l,t=n(67294);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e}).apply(this,arguments)}a.Z=function(e){return t.createElement("svg",_extends({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),l||(l=t.createElement("path",{d:"M4 13h14.09l-6.79 6.79a.996.996 0 1 0 1.41 1.41l8.5-8.5c.06-.06.09-.13.13-.2.03-.04.06-.08.08-.13a.91.91 0 0 0 .08-.37c0-.03-.01-.05-.01-.07-.01-.1-.02-.21-.06-.31a.955.955 0 0 0-.22-.33L12.72 2.8c-.2-.2-.45-.29-.71-.29-.26 0-.51.1-.71.29a.996.996 0 0 0 0 1.41L18.08 11H4c-.55 0-1 .45-1 1s.45 1 1 1Z"})))}},57758:function(e,a,n){"use strict";var l,t=n(67294);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e}).apply(this,arguments)}a.Z=function(e){return t.createElement("svg",_extends({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),l||(l=t.createElement("path",{d:"M2.5 8.38c0 .26.1.51.29.71l8.5 8.5c.39.39 1.02.39 1.41 0l8.5-8.5a.996.996 0 1 0-1.41-1.41L12 15.46 4.2 7.67a.996.996 0 0 0-1.41 0c-.19.2-.29.45-.29.71Z"})))}},89846:function(e,a,n){"use strict";var l,t=n(67294);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e}).apply(this,arguments)}a.Z=function(e){return t.createElement("svg",_extends({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),l||(l=t.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 12a8 8 0 1 1 16 0 8 8 0 0 1-16 0Zm8-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2Zm0 4a1 1 0 0 1 1 1v4h4a1 1 0 1 1 0 2h-4v4a1 1 0 1 1-2 0v-4H7a1 1 0 1 1 0-2h4V7a1 1 0 0 1 1-1Z"})))}},1656:function(e,a,n){"use strict";var l,t=n(67294);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e}).apply(this,arguments)}a.Z=function(e){return t.createElement("svg",_extends({viewBox:"0 0 15 26",xmlns:"http://www.w3.org/2000/svg"},e),l||(l=t.createElement("path",{d:"M7.11 26C3.287 26 .178 22.757.178 18.772V5.312C.179 2.382 2.469 0 5.285 0 6.66 0 7.947.559 8.913 1.573a5.38 5.38 0 0 1 1.478 3.74v11.439c0 1.872-1.472 3.395-3.282 3.395-1.809 0-3.281-1.523-3.281-3.395V8.333a1 1 0 0 1 2 0v8.418c0 .769.575 1.394 1.281 1.394.707 0 1.282-.625 1.282-1.394V5.31c0-.894-.328-1.732-.926-2.36a2.998 2.998 0 0 0-2.18-.952c-1.713 0-3.106 1.485-3.106 3.312v13.46c0 2.882 2.212 5.228 4.93 5.228 2.72 0 4.932-2.346 4.932-5.228V8.333a1 1 0 0 1 2 0v10.439c0 3.985-3.109 7.228-6.932 7.228Z"})))}},29195:function(e,a,n){"use strict";n.r(a);let l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BlockingEmailInputModalWrapper_viewer",selections:[{alias:"enableBlockingEmailInputModal",args:[{kind:"Literal",name:"gateName",value:"poe_web_show_blocking_email_input_modal"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_show_blocking_email_input_modal")'},{alias:null,args:null,kind:"ScalarField",name:"primaryEmail",storageKey:null}],type:"Viewer",abstractKey:null};l.hash="66631cf1203329264ab6cf4cfc5d37c4",a.default=l},51013:function(e,a,n){"use strict";n.r(a);let l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ChatMessageFileInputButton_viewer",selections:[{alias:"isMultibotEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_multibot_web"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_multibot_web")'}],type:"Viewer",abstractKey:null};l.hash="bcc8a3a9fa6469edfb78da5be21580e0",a.default=l},31168:function(e,a,n){"use strict";n.r(a);let l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ChatMessageInputAttachments_ChatMessageInputAttachment_messageAttachment",selections:[{args:null,kind:"FragmentSpread",name:"FileInfo_attachment"}],type:"MessageAttachment",abstractKey:null};l.hash="5c1de64091b0951dc9cce2f9eac236f1",a.default=l},12699:function(e,a,n){"use strict";n.r(a);let l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ChatMessageInputAttachments_ChatMessageInputAttachment_viewer",selections:[{args:null,kind:"FragmentSpread",name:"FileInfo_viewer"}],type:"Viewer",abstractKey:null};l.hash="d9c9bd2d1160ffd2047b73ad589df9bb",a.default=l},74083:function(e,a,n){"use strict";n.r(a);let l={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"ChatMessageInputAttachments_messageAttachments",selections:[{args:null,kind:"FragmentSpread",name:"ChatMessageInputAttachments_ChatMessageInputAttachment_messageAttachment"}],type:"MessageAttachment",abstractKey:null};l.hash="eeaee6404e1a35d10e11dfb47510ff60",a.default=l},64192:function(e,a,n){"use strict";n.r(a);let l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ChatMessageInputAttachments_viewer",selections:[{args:null,kind:"FragmentSpread",name:"ChatMessageInputAttachments_ChatMessageInputAttachment_viewer"}],type:"Viewer",abstractKey:null};l.hash="cecc4cb7b08e0fc64f11ecf14a181d25",a.default=l},7760:function(e,a,n){"use strict";var l,t,s,i,r,o,u,d,c,g,m,p;n.r(a);let h=(l={defaultValue:null,kind:"LocalArgument",name:"chatCode"},t={defaultValue:null,kind:"LocalArgument",name:"handle"},s={defaultValue:null,kind:"LocalArgument",name:"hasChat"},i=[{kind:"Variable",name:"name",variableName:"handle"}],r={alias:null,args:null,kind:"ScalarField",name:"canUserAccessBot",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"handle",storageKey:null},d={condition:"hasChat",kind:"Condition",passingValue:!0,selections:[{alias:null,args:[u={kind:"Variable",name:"chatCode",variableName:"chatCode"}],kind:"ScalarField",name:"isInChat",storageKey:null}]},c=[u,{kind:"Variable",name:"hasChat",variableName:"hasChat"}],g=[l,s],{fragment:{argumentDefinitions:[l,t,s],kind:"Fragment",metadata:null,name:"ChatMessageInputContainerSelectBotQuery",selections:[{alias:null,args:i,concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[r,{kind:"InlineDataFragmentSpread",name:"ChatMessageInputContainer_selectBot",selections:[o,{kind:"InlineDataFragmentSpread",name:"ChatMessageInputFooter_selectBot",selections:[o,d,{args:null,kind:"FragmentSpread",name:"ChatPageMain_targetedBot"}],args:c,argumentDefinitions:g},{kind:"InlineDataFragmentSpread",name:"ChatHomeMain_selectBot",selections:[m={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"ChatSubscriptionPaywallContextWrapper_bot"},{args:null,kind:"FragmentSpread",name:"ChatHomeMainInputContainer_bot"},{kind:"InlineDataFragmentSpread",name:"useHomeBotSelector_selectBot",selections:[m,{args:null,kind:"FragmentSpread",name:"BotSelectorHomeMain_bots"}],args:null,argumentDefinitions:[]}],args:null,argumentDefinitions:[]}],args:c,argumentDefinitions:g}],storageKey:null}],type:"QueryRoot",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[t,l,s],kind:"Operation",name:"ChatMessageInputContainerSelectBotQuery",selections:[{alias:null,args:i,concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[r,o,{alias:null,args:null,kind:"ScalarField",name:"supportsRemix",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isTrustedBot",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},m,{alias:null,args:null,kind:"ScalarField",name:"isServerBot",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"uploadFileSizeLimit",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"allowsImageAttachments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"supportsFileUpload",storageKey:null},{alias:null,args:null,concreteType:"MessagePointLimit",kind:"LinkedField",name:"messagePointLimit",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"balanceTooltipText",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"numRemainingMessages",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"balanceTooltipType",storageKey:null},m,{alias:null,args:null,kind:"ScalarField",name:"displayMessagePointPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shouldShowReminderBanner",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"remainingMessagesLimitReason",storageKey:null}],storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"botId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nickname",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"deletionState",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isCreatedByPoeUserAccount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"introduction",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"messageTimeoutSecs",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPrivateBot",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isApiBot",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"limitedAccessType",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shouldHideLimitedAccessTag",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"translatedBotTags",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"picture",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"localName",storageKey:null}],type:"LocalBotImage",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],type:"URLBotImage",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mayHaveSuggestedReplies",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"supportsResend",storageKey:null},{alias:null,args:null,concreteType:"Bot",kind:"LinkedField",name:"animateToVideoBot",plural:!1,selections:[p,m,o],storageKey:null},d,{kind:"TypeDiscriminator",abstractKey:"__isNode"}],storageKey:null}]},params:{id:"021a798dd35dd2175d4ddfa70e56c061c3673626ac7f0e8555278e6c2184f645",metadata:{},name:"ChatMessageInputContainerSelectBotQuery",operationKind:"query",text:null}});h.hash="bcc69695b48397b7ab8d6e81d7ccb6c4",a.default=h},5466:function(e,a,n){"use strict";n.r(a);let l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ChatMessageInputContainer_bot",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isServerBot",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"uploadFileSizeLimit",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"allowsImageAttachments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"supportsFileUpload",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"handle",storageKey:null},{args:null,kind:"FragmentSpread",name:"ChatMessageSendButton_bot"},{args:null,kind:"FragmentSpread",name:"ChatMessageTextArea_bot"},{args:null,kind:"FragmentSpread",name:"botHelpers_useDeletion_bot"},{args:null,kind:"FragmentSpread",name:"botHelpers_useViewerHasNoMessagesLeft_bot"},{args:null,kind:"FragmentSpread",name:"subscriptionHelpers_useBotLogData_bot"},{args:null,kind:"FragmentSpread",name:"useFileUpload_bot"}],type:"Bot",abstractKey:null};l.hash="cea111d67e8462649185cfe254052738",a.default=l},60352:function(e,a,n){"use strict";n.r(a);let l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ChatMessageInputContainer_chat",selections:[{alias:null,args:null,kind:"ScalarField",name:"chatCode",storageKey:null},{args:null,kind:"FragmentSpread",name:"ChatMessageInputBotSelector_chat"}],type:"Chat",abstractKey:null};l.hash="0ab2f94f733b3d71d9706096885c42c3",a.default=l},42785:function(e,a,n){"use strict";n.r(a);let l={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"ChatMessageInputContainer_messageEdges",selections:[{args:null,kind:"FragmentSpread",name:"ChatMessageTextArea_messageEdges"}],type:"MessageEdge",abstractKey:null};l.hash="3763d1e0a57ccedfde9ee810abab3e3b",a.default=l},57806:function(e,a,n){"use strict";n.r(a);let l={kind:"InlineDataFragment",name:"ChatMessageInputContainer_selectBot"};l.hash="96cbab8e7d9e0584bdc009117f39daaf",a.default=l},50467:function(e,a,n){"use strict";n.r(a);let l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ChatMessageInputContainer_viewer",selections:[{args:null,kind:"FragmentSpread",name:"ChatMessageSendButton_viewer"},{args:null,kind:"FragmentSpread",name:"ChatMessageInputAttachments_viewer"},{args:null,kind:"FragmentSpread",name:"ChatMessageTextArea_viewer"},{args:null,kind:"FragmentSpread",name:"ChatMessageFileInputButton_viewer"},{alias:"isMultibotEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_multibot_web"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_multibot_web")'},{alias:"isMultibotV2Enabled",args:[{kind:"Literal",name:"gateName",value:"poe_multibot_v2_web"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_multibot_v2_web")'},{alias:"isFilePasteEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_web_file_paste"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_file_paste")'}],type:"Viewer",abstractKey:null};l.hash="10f8b6a48acd93befdbc372572ce9adb",a.default=l},73230:function(e,a,n){"use strict";var l,t,s,i,r,o;n.r(a);let u={fragment:{argumentDefinitions:l=[{defaultValue:null,kind:"LocalArgument",name:"botId"}],kind:"Fragment",metadata:null,name:"ChatMessageLimitTooltipBotRefetchQuery",selections:[{alias:null,args:t=[{kind:"Variable",name:"botId",variableName:"botId"}],concreteType:"Bot",kind:"LinkedField",name:"botById",plural:!1,selections:[{alias:null,args:null,concreteType:"MessagePointLimit",kind:"LinkedField",name:"messagePointLimit",plural:!1,selections:[s={alias:null,args:null,kind:"ScalarField",name:"balanceTooltipText",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"numRemainingMessages",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"balanceTooltipType",storageKey:null}],storageKey:null}],storageKey:null}],type:"QueryRoot",abstractKey:null},kind:"Request",operation:{argumentDefinitions:l,kind:"Operation",name:"ChatMessageLimitTooltipBotRefetchQuery",selections:[{alias:null,args:t,concreteType:"Bot",kind:"LinkedField",name:"botById",plural:!1,selections:[{alias:null,args:null,concreteType:"MessagePointLimit",kind:"LinkedField",name:"messagePointLimit",plural:!1,selections:[s,i,r,o={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},o],storageKey:null}]},params:{id:"75a11bd9f1bf79d7c57e2d6bc2decf7acf0818fd51b19bfaaaa1bd69c78c7713",metadata:{},name:"ChatMessageLimitTooltipBotRefetchQuery",operationKind:"query",text:null}};u.hash="314a0e419e698efc6a45f0db4b881fbf",a.default=u},80946:function(e,a,n){"use strict";n.r(a);let l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ChatMessageLimitTooltip_bot",selections:[{alias:null,args:null,concreteType:"MessagePointLimit",kind:"LinkedField",name:"messagePointLimit",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"balanceTooltipText",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"numRemainingMessages",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"balanceTooltipType",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"botId",storageKey:null},{args:null,kind:"FragmentSpread",name:"subscriptionHelpers_useBotLogData_bot"}],type:"Bot",abstractKey:null};l.hash="74836a86dc840fab1a13c57a98d49df9",a.default=l},27738:function(e,a,n){"use strict";n.r(a);let l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ChatMessageLimitTooltip_viewer",selections:[{alias:null,args:null,concreteType:"Subscription",kind:"LinkedField",name:"subscription",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isActive",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForWebSubscriptions",storageKey:null}],type:"Viewer",abstractKey:null};l.hash="73da26ccf4397272bc7e930b734266f2",a.default=l},72612:function(e,a,n){"use strict";n.r(a);let l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ChatMessageSendButton_bot",selections:[{args:null,kind:"FragmentSpread",name:"ChatMessageLimitTooltip_bot"}],type:"Bot",abstractKey:null};l.hash="82fbd2e64529b601ae67251cfcd5e239",a.default=l},19117:function(e,a,n){"use strict";n.r(a);let l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ChatMessageSendButton_viewer",selections:[{args:null,kind:"FragmentSpread",name:"ChatMessageLimitTooltip_viewer"}],type:"Viewer",abstractKey:null};l.hash="ed14f72231a4384c345c485904951c2a",a.default=l},9883:function(e,a,n){"use strict";n.r(a);let l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ChatMessageTextArea_bot",selections:[{args:null,kind:"FragmentSpread",name:"subscriptionHelpers_useBotLogData_bot"},{args:null,kind:"FragmentSpread",name:"botHelpers_useViewerHasNoMessagesLeft_bot"}],type:"Bot",abstractKey:null};l.hash="5e5674f17e6353a7dc2608e86d15a879",a.default=l},87330:function(e,a,n){"use strict";n.r(a);let l={kind:"InlineDataFragment",name:"ChatMessageTextArea_getLastHumanMessageText_messageEdge"};l.hash="a01c79c1084fa7fcca797236c2cf1604",a.default=l},73938:function(e,a,n){"use strict";n.r(a);let l={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"ChatMessageTextArea_messageEdges",selections:[{args:null,kind:"FragmentSpread",name:"ChatMessageTextArea_useOnKeyDown_messageEdges"}],type:"MessageEdge",abstractKey:null};l.hash="adef175ef9e8eb0b392205c0b7ec1e41",a.default=l},91963:function(e,a,n){"use strict";n.r(a);let l={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"ChatMessageTextArea_useOnKeyDown_messageEdges",selections:[{kind:"InlineDataFragmentSpread",name:"ChatMessageTextArea_getLastHumanMessageText_messageEdge",selections:[{alias:null,args:null,concreteType:"Message",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},{kind:"InlineDataFragmentSpread",name:"messageHelpers_isHumanMessage",selections:[{alias:null,args:null,kind:"ScalarField",name:"author",storageKey:null}],args:null,argumentDefinitions:[]}],storageKey:null}],args:null,argumentDefinitions:[]}],type:"MessageEdge",abstractKey:null};l.hash="326ac8a25d146f97c1aab77fcfc8ef9b",a.default=l},97369:function(e,a,n){"use strict";n.r(a);let l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ChatMessageTextArea_viewer",selections:[{alias:"isMultibotEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_multibot_web"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_multibot_web")'}],type:"Viewer",abstractKey:null};l.hash="a0aa582d2e97f70095f9b9d452bfcc71",a.default=l},38117:function(e,a,n){"use strict";n.r(a);let l={kind:"InlineDataFragment",name:"getChatContentType_chat"};l.hash="2291a2b3c3c16aec13efd467f4adefba",a.default=l},16761:function(e,a,n){"use strict";var l,t,s,i,r,o,u,d,c,g,m,p,h,y,k,b,f,_,F;n.r(a);let v=(l=[{defaultValue:null,kind:"LocalArgument",name:"messageId"}],t=[{kind:"Variable",name:"messageId",variableName:"messageId"}],s={alias:null,args:null,kind:"ScalarField",name:"clientNonce",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"attachmentId",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"size",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"mimeType",storageKey:null},p={kind:"InlineFragment",selections:[m={kind:"ClientExtension",selections:[g={alias:null,args:null,kind:"ScalarField",name:"isOptimistic",storageKey:null}]}],type:"MessageAttachment",abstractKey:null},h={alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"botId",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"deletionState",storageKey:null},f={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"picture",plural:!1,selections:[b={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"localName",storageKey:null}],type:"LocalBotImage",abstractKey:null},{kind:"InlineFragment",selections:[u],type:"URLBotImage",abstractKey:null}],storageKey:null},{fragment:{argumentDefinitions:l,kind:"Fragment",metadata:null,name:"localMessageQuery",selections:[{alias:null,args:t,concreteType:"Message",kind:"LinkedField",name:"message",plural:!1,selections:[s,{kind:"InlineDataFragmentSpread",name:"messagesConnection_message",selections:[i,{args:null,kind:"FragmentSpread",name:"ChatMessagesView_useMessagePairs_messages"},{args:null,kind:"FragmentSpread",name:"ChatHistoryListItem_message"}],args:null,argumentDefinitions:[]},{args:null,kind:"FragmentSpread",name:"ChatLastMessageArea_lastMessage"},{args:null,kind:"FragmentSpread",name:"ChatPageMain_lastMessage"}],storageKey:null}],type:"QueryRoot",abstractKey:null},kind:"Request",operation:{argumentDefinitions:l,kind:"Operation",name:"localMessageQuery",selections:[{alias:null,args:t,concreteType:"Message",kind:"LinkedField",name:"message",plural:!1,selections:[s,i,{alias:null,args:null,kind:"ScalarField",name:"messageId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"creationTime",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"state",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"author",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"contentType",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sourceType",storageKey:null},{alias:null,args:null,concreteType:"MessageAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[i,r,o,u,{alias:null,args:null,concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[d,i,c],storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"isInline",storageKey:null},{alias:null,args:null,concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},u,{alias:null,args:null,kind:"ScalarField",name:"thumbnailUrl",storageKey:null}],storageKey:null},p],type:"Attachment",abstractKey:"__isAttachment"},m],storageKey:null},{alias:null,args:null,concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[h,{alias:null,args:null,kind:"ScalarField",name:"messageTimeoutSecs",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPrivateBot",storageKey:null},y,{alias:null,args:null,kind:"ScalarField",name:"allowsImageAttachments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isApiBot",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"limitedAccessType",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shouldHideLimitedAccessTag",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"translatedBotTags",storageKey:null},k,f,_={alias:null,args:null,kind:"ScalarField",name:"handle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"canUserAccessBot",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nickname",storageKey:null},i,{alias:null,args:null,kind:"ScalarField",name:"introduction",storageKey:null},{alias:null,args:null,concreteType:"MessagePointLimit",kind:"LinkedField",name:"messagePointLimit",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"numRemainingMessages",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shouldShowReminderBanner",storageKey:null},i,{alias:null,args:null,kind:"ScalarField",name:"displayMessagePointPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"remainingMessagesLimitReason",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"balanceTooltipText",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"balanceTooltipType",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isCreatedByPoeUserAccount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mayHaveSuggestedReplies",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"supportsResend",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"supportsRemix",storageKey:null},{alias:null,args:null,concreteType:"Bot",kind:"LinkedField",name:"animateToVideoBot",plural:!1,selections:[y,i,_],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isTrustedBot",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isServerBot",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"uploadFileSizeLimit",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"supportsFileUpload",storageKey:null},F={kind:"TypeDiscriminator",abstractKey:"__isNode"}],storageKey:null},{alias:null,args:null,concreteType:"CommandInfo",kind:"LinkedField",name:"command",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"commandType",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"vote",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasCitations",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"textLengthOnCancellation",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"followupActions",plural:!0,selections:[b,{kind:"TypeDiscriminator",abstractKey:"__isMessageFollowupActionBase"},{kind:"InlineFragment",selections:[{alias:"titleText",args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:"bodyText",args:null,kind:"ScalarField",name:"body",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sendText",storageKey:null},{alias:null,args:null,concreteType:"MessageAttachment",kind:"LinkedField",name:"sendAttachments",plural:!0,selections:[r,i,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[c,i,d],storageKey:null},o,u,p],type:"Attachment",abstractKey:"__isAttachment"}],storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"primaryImageSources",plural:!0,selections:[b,{kind:"InlineFragment",selections:[i,o,u],type:"MessageAttachment",abstractKey:null},{kind:"InlineFragment",selections:[i,_,h,k,f],type:"Bot",abstractKey:null},{kind:"InlineFragment",selections:[i],type:"Node",abstractKey:"__isNode"}],storageKey:null}],type:"MessageFollowupActionBase",abstractKey:"__isMessageFollowupActionBase"}],type:"SendMessageFollowupAction",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"suggestedReplies",storageKey:null},{alias:null,args:null,concreteType:"Bot",kind:"LinkedField",name:"recommendedBots",plural:!0,selections:[y,i],storageKey:null},{kind:"ClientExtension",selections:[g,{alias:null,args:null,kind:"ScalarField",name:"timeoutLevel",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"errorMessage",storageKey:null}]},F],storageKey:null}]},params:{id:"9c2fc42c916c99400d91e625ff90ef51f3ef5af4bd732bf340f01575c0f86d5d",metadata:{},name:"localMessageQuery",operationKind:"query",text:null}});v.hash="34bae80b0f86e101706671faaba24bc1",a.default=v},65527:function(e,a,n){"use strict";n.r(a);let l={kind:"InlineDataFragment",name:"localMessage_createLocalChatMessage_bot"};l.hash="56ea691be54c0931a67823a3e0f77b74",a.default=l},51151:function(e,a,n){"use strict";n.r(a);let l={kind:"InlineDataFragment",name:"messagesConnection_message"};l.hash="cfb93ef751c8784742eb56c3f403e5da",a.default=l},95101:function(e,a,n){"use strict";n.r(a);let l={kind:"InlineDataFragment",name:"optimisticMessage_createOptimisticBotMessage_bot"};l.hash="c40562515293ee0a349dcd825f615c78",a.default=l},14973:function(e,a,n){"use strict";n.r(a);let l={kind:"InlineDataFragment",name:"resendMessage_bot"};l.hash="dd2b0610e4bd5a8280817ddcdd093f52",a.default=l},17048:function(e,a,n){"use strict";n.r(a);let l={kind:"InlineDataFragment",name:"resendMessage_chat"};l.hash="18d6b5bb8062a445ad9f0eb2fd4f5f1d",a.default=l},71669:function(e,a,n){"use strict";n.r(a);let l={kind:"InlineDataFragment",name:"resendMessage_message"};l.hash="e56e3fa2233e8ab03a48556a6fc0f1ec",a.default=l},10214:function(e,a,n){"use strict";n.r(a);let l={kind:"InlineDataFragment",name:"resendMessage_viewer"};l.hash="430829d0c6117a06aef6e3c7398e1ed3",a.default=l},53398:function(e,a,n){"use strict";var l,t,s,i,r,o,u,d,c,g,m,p,h,y,k,b,f,_,F,v,S,C,K,M,w,I,T,L,x,E,A,B,D,R,N,V,P,O,U,j,Z,H,G,z,W,q,Q,$,X,J,Y,ee,ea,en,el,et,es,ei,er,eo,eu,ed,ec,eg,em,ep,eh,ey,ek,eb,ef,e_,eF,ev,eS,eC,eK,eM,ew;n.r(a);let eI=(l={defaultValue:null,kind:"LocalArgument",name:"attachments"},t={defaultValue:null,kind:"LocalArgument",name:"bot"},s={defaultValue:null,kind:"LocalArgument",name:"chatId"},i={defaultValue:null,kind:"LocalArgument",name:"clientNonce"},r={defaultValue:null,kind:"LocalArgument",name:"existingMessageAttachmentsIds"},o={defaultValue:null,kind:"LocalArgument",name:"messagePointsDisplayPrice"},u={defaultValue:null,kind:"LocalArgument",name:"query"},d={defaultValue:null,kind:"LocalArgument",name:"sdid"},c={defaultValue:null,kind:"LocalArgument",name:"shouldFetchChat"},g={defaultValue:null,kind:"LocalArgument",name:"source"},m=[{kind:"Variable",name:"attachments",variableName:"attachments"},{kind:"Variable",name:"bot",variableName:"bot"},{kind:"Variable",name:"chatId",variableName:"chatId"},{kind:"Variable",name:"clientNonce",variableName:"clientNonce"},{kind:"Variable",name:"existingMessageAttachmentsIds",variableName:"existingMessageAttachmentsIds"},{kind:"Variable",name:"messagePointsDisplayPrice",variableName:"messagePointsDisplayPrice"},{kind:"Variable",name:"query",variableName:"query"},{kind:"Variable",name:"sdid",variableName:"sdid"},{kind:"Variable",name:"source",variableName:"source"}],h={alias:null,args:null,kind:"ScalarField",name:"messageId",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"creationTime",storageKey:null},k={args:null,kind:"FragmentSpread",name:"ChatHistoryListItem_message"},b=[p={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],f={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"statusMessage",storageKey:null},v={alias:null,args:null,concreteType:"MessageCreateFailedUrl",kind:"LinkedField",name:"failedUrls",plural:!0,selections:[F={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reason",storageKey:null}],storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"chatId",storageKey:null},C={alias:null,args:null,kind:"ScalarField",name:"chatCode",storageKey:null},K={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"botId",storageKey:null},T=[{kind:"InlineDataFragmentSpread",name:"sendMessage_newChatUpdater_bot",selections:[I={kind:"InlineDataFragmentSpread",name:"optimisticMessage_createOptimisticBotMessage_bot",selections:[M={alias:null,args:null,kind:"ScalarField",name:"nickname",storageKey:null},{kind:"InlineDataFragmentSpread",name:"localMessage_createLocalChatMessage_bot",selections:[p,{args:null,kind:"FragmentSpread",name:"ChatMessage_bot"},{args:null,kind:"FragmentSpread",name:"ChatLastMessageArea_bot"},{args:null,kind:"FragmentSpread",name:"ChatPageMain_targetedBot"}],args:null,argumentDefinitions:[]}],args:null,argumentDefinitions:[]}],args:null,argumentDefinitions:[]}],L={alias:null,args:null,kind:"ScalarField",name:"hasMarkdownRendering",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},E={alias:null,args:null,kind:"ScalarField",name:"state",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"author",storageKey:null},B={alias:null,args:null,kind:"ScalarField",name:"contentType",storageKey:null},D={alias:null,args:null,kind:"ScalarField",name:"sourceType",storageKey:null},Z={alias:null,args:null,concreteType:"MessageAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[p,R={alias:null,args:null,kind:"ScalarField",name:"attachmentId",storageKey:null},N={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},F,{alias:null,args:null,concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[V={alias:null,args:null,kind:"ScalarField",name:"size",storageKey:null},p,P={alias:null,args:null,kind:"ScalarField",name:"mimeType",storageKey:null}],storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"isInline",storageKey:null},{alias:null,args:null,concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},F,{alias:null,args:null,kind:"ScalarField",name:"thumbnailUrl",storageKey:null}],storageKey:null},j={kind:"InlineFragment",selections:[U={kind:"ClientExtension",selections:[O={alias:null,args:null,kind:"ScalarField",name:"isOptimistic",storageKey:null}]}],type:"MessageAttachment",abstractKey:null}],type:"Attachment",abstractKey:"__isAttachment"},U],storageKey:null},ea={alias:null,args:null,kind:"ScalarField",name:"handle",storageKey:null},en={alias:null,args:null,kind:"ScalarField",name:"canUserAccessBot",storageKey:null},el={kind:"TypeDiscriminator",abstractKey:"__isNode"},et={alias:null,args:null,concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[H={alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},G={alias:null,args:null,kind:"ScalarField",name:"messageTimeoutSecs",storageKey:null},z={alias:null,args:null,kind:"ScalarField",name:"isPrivateBot",storageKey:null},w,W={alias:null,args:null,kind:"ScalarField",name:"allowsImageAttachments",storageKey:null},q={alias:null,args:null,kind:"ScalarField",name:"isApiBot",storageKey:null},Q={alias:null,args:null,kind:"ScalarField",name:"limitedAccessType",storageKey:null},$={alias:null,args:null,kind:"ScalarField",name:"shouldHideLimitedAccessTag",storageKey:null},X={alias:null,args:null,kind:"ScalarField",name:"translatedBotTags",storageKey:null},J={alias:null,args:null,kind:"ScalarField",name:"deletionState",storageKey:null},ee={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"picture",plural:!1,selections:[Y={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"localName",storageKey:null}],type:"LocalBotImage",abstractKey:null},{kind:"InlineFragment",selections:[F],type:"URLBotImage",abstractKey:null}],storageKey:null},ea,en,M,p,el],storageKey:null},es={alias:null,args:null,concreteType:"CommandInfo",kind:"LinkedField",name:"command",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"commandType",storageKey:null}],storageKey:null},ei={alias:null,args:null,kind:"ScalarField",name:"vote",storageKey:null},er={alias:null,args:null,kind:"ScalarField",name:"hasCitations",storageKey:null},eo={alias:null,args:null,kind:"ScalarField",name:"textLengthOnCancellation",storageKey:null},eu={alias:null,args:null,kind:"ScalarField",name:"clientNonce",storageKey:null},ec={kind:"ClientExtension",selections:[O,ed={alias:null,args:null,kind:"ScalarField",name:"timeoutLevel",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"errorMessage",storageKey:null}]},eg={alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},em={alias:null,args:null,kind:"ScalarField",name:"introduction",storageKey:null},ep={alias:null,args:null,concreteType:"MessagePointLimit",kind:"LinkedField",name:"messagePointLimit",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"numRemainingMessages",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shouldShowReminderBanner",storageKey:null},p,{alias:null,args:null,kind:"ScalarField",name:"displayMessagePointPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"remainingMessagesLimitReason",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"balanceTooltipText",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"balanceTooltipType",storageKey:null}],storageKey:null},eh={alias:null,args:null,kind:"ScalarField",name:"isCreatedByPoeUserAccount",storageKey:null},ey={alias:null,args:null,kind:"ScalarField",name:"mayHaveSuggestedReplies",storageKey:null},ek={alias:null,args:null,kind:"ScalarField",name:"supportsResend",storageKey:null},eb={alias:null,args:null,kind:"ScalarField",name:"supportsRemix",storageKey:null},ef={alias:null,args:null,concreteType:"Bot",kind:"LinkedField",name:"animateToVideoBot",plural:!1,selections:[w,p,ea],storageKey:null},e_={alias:null,args:null,kind:"ScalarField",name:"isTrustedBot",storageKey:null},eF={alias:null,args:null,kind:"ScalarField",name:"isServerBot",storageKey:null},ev={alias:null,args:null,kind:"ScalarField",name:"uploadFileSizeLimit",storageKey:null},eS={alias:null,args:null,kind:"ScalarField",name:"supportsFileUpload",storageKey:null},eC={alias:null,args:null,kind:"ScalarField",name:"isDeleted",storageKey:null},eK=[w,p],{fragment:{argumentDefinitions:[l,t,s,i,r,o,u,d,c,g],kind:"Fragment",metadata:null,name:"sendMessageMutation",selections:[{alias:null,args:m,concreteType:"MessageEdgeCreate",kind:"LinkedField",name:"messageEdgeCreate",plural:!1,selections:[{alias:null,args:null,concreteType:"MessageEdge",kind:"LinkedField",name:"message",plural:!1,selections:[p,{alias:null,args:null,concreteType:"Message",kind:"LinkedField",name:"node",plural:!1,selections:[h,y,{kind:"InlineDataFragmentSpread",name:"messagesConnection_message",selections:[p,{args:null,kind:"FragmentSpread",name:"ChatMessagesView_useMessagePairs_messages"},k],args:null,argumentDefinitions:[]},k,{condition:"shouldFetchChat",kind:"Condition",passingValue:!0,selections:[{kind:"InlineDataFragmentSpread",name:"sendMessage_newChatUpdater_message",selections:b,args:null,argumentDefinitions:[]}]}],storageKey:null},{args:null,kind:"FragmentSpread",name:"sendMessageMutation_messageEdge"}],storageKey:null},f,_,v,{condition:"shouldFetchChat",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"Chat",kind:"LinkedField",name:"chat",plural:!1,selections:[p,S,C,K,{alias:null,args:null,concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[p,M,w],storageKey:null},{kind:"InlineDataFragmentSpread",name:"sendMessage_newChatUpdater_chat",selections:[p,S,C,{alias:null,args:null,concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:T,storageKey:null},{kind:"InlineDataFragmentSpread",name:"getChatContentType_chat",selections:[{alias:null,args:null,concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[L],storageKey:null}],args:null,argumentDefinitions:[]}],args:null,argumentDefinitions:[]},{args:null,kind:"FragmentSpread",name:"ChatHistoryListItem_chat"},{args:null,kind:"FragmentSpread",name:"ChatPage_chat"}],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"ChatPage_viewer"}],storageKey:null}]},{alias:null,args:null,concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[{condition:"shouldFetchChat",kind:"Condition",passingValue:!0,selections:T},{kind:"InlineDataFragmentSpread",name:"sendMessage_onSuccessUpdater_bot",selections:[w,I],args:null,argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"setBotDetailsSidebar_bot",selections:[{args:null,kind:"FragmentSpread",name:"ChatBotDetailsSidebar_bot"}],args:null,argumentDefinitions:[]},{args:null,kind:"FragmentSpread",name:"ChatMessageLimitTooltip_bot"}],storageKey:null}],storageKey:null}],type:"MutationRoot",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[s,t,u,g,i,d,l,r,c,o],kind:"Operation",name:"sendMessageMutation",selections:[{alias:null,args:m,concreteType:"MessageEdgeCreate",kind:"LinkedField",name:"messageEdgeCreate",plural:!1,selections:[{alias:null,args:null,concreteType:"MessageEdge",kind:"LinkedField",name:"message",plural:!1,selections:[p,{alias:null,args:null,concreteType:"Message",kind:"LinkedField",name:"node",plural:!1,selections:[h,y,p,x,E,A,B,D,Z,et,es,ei,er,eo,eu,ec,el],storageKey:null},eg],storageKey:null},f,_,v,{alias:null,args:null,concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[w,M,p,H,G,z,W,q,Q,$,X,J,ee,ea,en,em,ep,eh,ey,ek,eb,ef,e_,eF,ev,eS,{condition:"shouldFetchChat",kind:"Condition",passingValue:!0,selections:[el]},el],storageKey:null},{condition:"shouldFetchChat",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"Chat",kind:"LinkedField",name:"chat",plural:!1,selections:[p,S,C,K,{alias:null,args:null,concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[p,M,w,H,G,z,W,q,Q,$,X,J,ee,ea,en,em,ep,eh,ey,ek,eb,ef,e_,eF,ev,eS,L,{alias:null,args:null,kind:"ScalarField",name:"viewerIsCreator",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isSystemBot",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewerIsFollower",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"followerCount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shareLink",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isDown",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"model",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"allowsClearContext",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"monthlyActiveUsers",storageKey:null},{alias:null,args:null,concreteType:"PoeUser",kind:"LinkedField",name:"creator",plural:!1,selections:[eC,{alias:null,args:[{kind:"Literal",name:"size",value:"small"}],kind:"ScalarField",name:"profilePhotoUrl",storageKey:'profilePhotoUrl(size:"small")'},{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},{alias:"nullableHandle",args:null,kind:"ScalarField",name:"handle",storageKey:null},p,el],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"poweredBy",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promptPlaintext",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shouldHide",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"conversationStarters",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isOfficialBot",storageKey:null},el],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"lastInteractionTime",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"botMembersCount",storageKey:null},{alias:null,args:null,concreteType:"Message",kind:"LinkedField",name:"lastMessage",plural:!1,selections:[x,p,E,{alias:null,args:null,concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[em,w,ep,p,eh,M,H,z,ey,ek,eb,ef,q,G,W,Q,$,X,J,ee,ea,en,e_,eF,ev,eS,el],storageKey:null},A,eo,ei,h,B,eu,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"followupActions",plural:!0,selections:[Y,{kind:"TypeDiscriminator",abstractKey:"__isMessageFollowupActionBase"},{kind:"InlineFragment",selections:[{alias:"titleText",args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:"bodyText",args:null,kind:"ScalarField",name:"body",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sendText",storageKey:null},{alias:null,args:null,concreteType:"MessageAttachment",kind:"LinkedField",name:"sendAttachments",plural:!0,selections:[R,p,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[P,p,V],storageKey:null},N,F,j],type:"Attachment",abstractKey:"__isAttachment"}],storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"primaryImageSources",plural:!0,selections:[Y,{kind:"InlineFragment",selections:[p,N,F],type:"MessageAttachment",abstractKey:null},{kind:"InlineFragment",selections:[p,ea,H,J,ee],type:"Bot",abstractKey:null},{kind:"InlineFragment",selections:b,type:"Node",abstractKey:"__isNode"}],storageKey:null}],type:"MessageFollowupActionBase",abstractKey:"__isMessageFollowupActionBase"}],type:"SendMessageFollowupAction",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"suggestedReplies",storageKey:null},{alias:null,args:null,concreteType:"MessageAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[N,F,p,{alias:null,args:null,concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[P,p],storageKey:null},R,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[V],storageKey:null},j],type:"Attachment",abstractKey:"__isAttachment"}],storageKey:null},{alias:null,args:null,concreteType:"Bot",kind:"LinkedField",name:"recommendedBots",plural:!0,selections:eK,storageKey:null},{kind:"ClientExtension",selections:[O,ed]}],storageKey:null},eC,{alias:null,args:eM=[{kind:"Literal",name:"last",value:5}],concreteType:"MessagesConnection",kind:"LinkedField",name:"messagesConnection",plural:!1,selections:[{alias:null,args:null,concreteType:"MessageEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Message",kind:"LinkedField",name:"node",plural:!1,selections:[p,A,h,y,x,E,B,D,Z,et,es,ei,er,eo,Y,ec,el],storageKey:null},p,eg],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hasPreviousPage",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"startCursor",storageKey:null}],storageKey:null},p],storageKey:"messagesConnection(last:5)"},{alias:null,args:eM,filters:null,handle:"connection",key:"ChatMessagesView_chat_messagesConnection",kind:"LinkedHandle",name:"messagesConnection"},{alias:null,args:null,kind:"ScalarField",name:"membersIncludeUntrustedBot",storageKey:null},el,U],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"allowImages",args:[{kind:"Literal",name:"gateName",value:"poe_allow_images"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_allow_images")'},{alias:"allowImagesForApiBots",args:[{kind:"Literal",name:"gateName",value:"poe_allow_images_for_api_bots"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_allow_images_for_api_bots")'},{alias:"enableImageViewer",args:[{kind:"Literal",name:"gateName",value:"poe_web_image_viewer"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_image_viewer")'},{alias:"enableMath",args:[{kind:"Literal",name:"gateName",value:"poe_web_enable_markdown_math"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_enable_markdown_math")'},{alias:null,args:null,kind:"ScalarField",name:"promptBotImageDomainWhitelist",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"uid",storageKey:null},{alias:"poeMessageDropdownImageOptions",args:[{kind:"Literal",name:"gateName",value:"poe_message_dropdown_image_options"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_message_dropdown_image_options")'},{alias:"enableImageAttachmentsForBots",args:[{kind:"Literal",name:"gateName",value:"poe_enable_image_attachments_for_bots"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_image_attachments_for_bots")'},{alias:"enableVideoAttachmentsForBots",args:[{kind:"Literal",name:"gateName",value:"poe_web_enable_video_player"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_enable_video_player")'},{alias:null,args:null,concreteType:"PoeUser",kind:"LinkedField",name:"poeUser",plural:!1,selections:[p,y],storageKey:null},{alias:null,args:null,concreteType:"Subscription",kind:"LinkedField",name:"subscription",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isActive",storageKey:null},p,{alias:null,args:null,kind:"ScalarField",name:"expiresTime",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"willCancelAtPeriodEnd",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"purchaseRevocationReason",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForWebSubscriptions",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shouldSeeWebSubscriptionAnnouncement",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shouldSeeAndroidSubscriptionAnnouncement",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shouldSeeResponseSpeedUpsell",storageKey:null},{alias:"useMultibot",args:ew=[{kind:"Literal",name:"gateName",value:"poe_multibot_web"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_multibot_web")'},{alias:"shareButtonExperiment",args:[{kind:"Literal",name:"experimentName",value:"poe_message_action_bar_share_button_redesign_v2"}],concreteType:"Experiment",kind:"LinkedField",name:"experiment",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"shouldLog",value:!1}],kind:"ScalarField",name:"variant",storageKey:"variant(shouldLog:false)"},N,p],storageKey:'experiment(experimentName:"poe_message_action_bar_share_button_redesign_v2")'},{alias:"useNewFollowupActions",args:[{kind:"Literal",name:"gateName",value:"poe_use_new_message_followup_actions_web"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_use_new_message_followup_actions_web")'},{alias:"enableRemixButton",args:[{kind:"Literal",name:"gateName",value:"poe_remix_button_web"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_remix_button_web")'},{alias:"enableInChatRecommendations",args:[{kind:"Literal",name:"gateName",value:"poe_web_in_chat_recommendations"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_in_chat_recommendations")'},{alias:null,args:null,kind:"ScalarField",name:"expensiveBotCostThreshold",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleToPurchaseOnAnyPlatform",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewerCountryCode",storageKey:null},{alias:null,args:null,concreteType:"MessagePointInfo",kind:"LinkedField",name:"messagePointInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"messagePointResetTime",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subscriberBonusGrantResetTime",storageKey:null},p],storageKey:null},{alias:"decoupleBotHandleAndName",args:[{kind:"Literal",name:"gateName",value:"poe_web_enable_bot_handle_display_name_decoupling"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_enable_bot_handle_display_name_decoupling")'},p,{alias:null,args:null,concreteType:"Bot",kind:"LinkedField",name:"defaultBot",plural:!1,selections:eK,storageKey:null},{alias:"isMultibotEnabled",args:ew,kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_multibot_web")'},{alias:"isMultibotV2Enabled",args:[{kind:"Literal",name:"gateName",value:"poe_multibot_v2_web"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_multibot_v2_web")'},{alias:"isFilePasteEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_web_file_paste"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_file_paste")'},{alias:"enableBlockingEmailInputModal",args:[{kind:"Literal",name:"gateName",value:"poe_web_show_blocking_email_input_modal"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_show_blocking_email_input_modal")'},{alias:null,args:null,kind:"ScalarField",name:"primaryEmail",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showConversationStarters",storageKey:null}],storageKey:null}]}],storageKey:null}]},params:{id:"487bc6f0fca5454a333f82ca9d5ac898c64c265492a786d543bc7fc1341d3383",metadata:{},name:"sendMessageMutation",operationKind:"mutation",text:null}});eI.hash="3bb6654eb65e1741b339932382f97cd2",a.default=eI},88530:function(e,a,n){"use strict";n.r(a);let l={kind:"InlineDataFragment",name:"sendMessage_bot"};l.hash="03d2ef9817ced391e4447fc3a36e2dc3",a.default=l},92750:function(e,a,n){"use strict";n.r(a);let l={kind:"InlineDataFragment",name:"sendMessage_chat"};l.hash="41e13c12a815d056441458d26ccd44e2",a.default=l},39574:function(e,a,n){"use strict";n.r(a);let l={kind:"InlineDataFragment",name:"sendMessage_messageAttachment"};l.hash="3516a5654ecab43280472adcd8637c86",a.default=l},7741:function(e,a,n){"use strict";n.r(a);let l={kind:"InlineDataFragment",name:"sendMessage_newChatUpdater_bot"};l.hash="1b13c18488f888b9a8e194c764eb6af8",a.default=l},87065:function(e,a,n){"use strict";n.r(a);let l={kind:"InlineDataFragment",name:"sendMessage_newChatUpdater_chat"};l.hash="f5b559d163f6ee823bdec1e085e6002a",a.default=l},13182:function(e,a,n){"use strict";n.r(a);let l={kind:"InlineDataFragment",name:"sendMessage_newChatUpdater_message"};l.hash="a3edfe280a68f7340ebe0be36940756a",a.default=l},4690:function(e,a,n){"use strict";n.r(a);let l={kind:"InlineDataFragment",name:"sendMessage_onMessageSendChatUpdate_chat"};l.hash="3f09cda2a6e7d19e423600d1197a875f",a.default=l},19984:function(e,a,n){"use strict";n.r(a);let l={kind:"InlineDataFragment",name:"sendMessage_onMessageSendChatUpdate_messageAttachment"};l.hash="8bcdc0fdf98f584608cee7a0839e5efd",a.default=l},60706:function(e,a,n){"use strict";n.r(a);let l={kind:"InlineDataFragment",name:"sendMessage_onSuccessUpdater_bot"};l.hash="ee4aaef889ad9dfcd7386da3d64786c3",a.default=l},97048:function(e,a,n){"use strict";n.r(a);let l={kind:"InlineDataFragment",name:"sendMessage_onSuccessUpdater_chat"};l.hash="f70ffec9639b1302e44bd3876c2bea0b",a.default=l},30232:function(e,a,n){"use strict";n.r(a);let l={kind:"InlineDataFragment",name:"sendMessage_viewer"};l.hash="fdb2976f1692a2dd709665455af2a052",a.default=l},35813:function(e,a,n){"use strict";n.r(a);let l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useFileUpload_bot",selections:[{alias:null,args:null,kind:"ScalarField",name:"uploadFileSizeLimit",storageKey:null}],type:"Bot",abstractKey:null};l.hash="9411ba544b4a8708972edb3b3b4991d0",a.default=l},33688:function(e,a,n){"use strict";n.d(a,{Z:function(){return eS}});var l,t,s,i,r,o=n(85893),u=n(5152),d=n.n(u),c=n(67294),g=n(22578),m=n(49169),p=n(2012),h=n(41019),y=n(81534),k=n(37650),b=n(8655),f=n(47986),_=n(38154),F=n.n(_),v=n(77614),S=n(69295),C=n(89846),K=n(1656),M=n(70442),w=n.n(M),I=n(81952),T=n.n(I);let L=(0,c.forwardRef)((e,a)=>{let[n,l]=(0,c.useState)(null),[t,s]=(0,c.useState)(0),i=(0,c.useRef)(null);return(0,c.useImperativeHandle)(a,()=>({setTooltip:e=>{l(e),s(e=>e+1),null!==i.current&&clearTimeout(i.current),i.current=window.setTimeout(()=>{l(null)},5e3)}}),[]),n?(0,o.jsx)("div",{className:T().tooltip,children:n},t):null});L.displayName="Tooltip";let x=(0,c.forwardRef)((e,a)=>{let{viewer:l,onFileUpload:t,...s}=e,{isMultibotEnabled:i}=(0,g.useFragment)(n(51013),l),r=(0,c.useRef)(null),u=(0,c.useCallback)(()=>{var e;null==r||null===(e=r.current)||void 0===e||e.click()},[]),d=(0,c.useCallback)(e=>{if(e.target.files){let a=Array.from(e.target.files);e.target.value="",t(a)}},[t]),m=(0,c.useRef)(null);return(0,c.useImperativeHandle)(a,()=>({setTooltip:e=>{var a;return null===(a=m.current)||void 0===a?void 0:a.setTooltip(e)}})),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{children:[(0,o.jsx)(S.t9,{className:w().button,onClick:u,...s,children:i?(0,o.jsx)(C.Z,{}):(0,o.jsx)(K.Z,{})}),(0,o.jsx)(L,{ref:m})]}),(0,o.jsx)("input",{className:w().input,ref:r,type:"file",multiple:!0,onChange:d})]})});x.displayName="ChatMessageFileInputButton";var E=n(39620),A=n(34616),B=n(25432),D=n.n(B),patterns_Dismissable=e=>{let{children:a,onDismiss:n,className:l}=e,t=(0,c.useCallback)(e=>{e.stopPropagation(),n()},[n]);return(0,o.jsxs)("div",{className:(0,A.$)(D().dismissableContainer,l),children:[a,(0,o.jsx)("button",{className:D().dismissButton,onClick:t,children:(0,o.jsx)(E.Z,{className:D().icon})})]})},R=n(39128),N=n(89942),V=n(30498),P=n(47180),O=n.n(P);let ChatMessageInputAttachment=e=>{let{file:a,viewer:l,index:t,onDismiss:s}=e,i=(0,c.useCallback)(()=>{s(t)},[s,t]),r=(0,g.useFragment)(n(12699),l),u=(0,V.J$)(n(31168),a);return(0,o.jsx)(patterns_Dismissable,{className:O().attachment,onDismiss:i,children:(0,o.jsx)(R.Z,{file:u,viewer:r})})};var inputFooter_ChatMessageInputAttachments=e=>{let{files:a,viewer:l,fileIds:t,onFileRemoved:s}=e,i=(0,c.useCallback)(e=>{s(e)},[s]),r=(0,g.useFragment)(n(64192),l),u=(0,V.mj)(n(74083),a);return a.length?(0,o.jsx)(N.Z,{className:O().container,children:u.map((e,a)=>(0,o.jsx)(ChatMessageInputAttachment,{file:e,viewer:r,index:a,onDismiss:i},t[a]))}):null};n(44311);var U=n(8787),j=n(92002),Z=n.n(j),H=n(26897),G=n(57758),z=n(67275),W=n(79500),q=n(68702),Q=n.n(q);(l=s||(s={})).base="base",l.warning="warning";var $=s,X=n(44720),inputFooter_ChatMessageLimitTooltip=e=>{let{bot:a,viewer:l}=e,t=(0,g.useFragment)(n(80946),a),{subscription:s,isEligibleForWebSubscriptions:i}=(0,g.useFragment)(n(27738),l),{messagePointLimit:r,botId:u}=t,{setBotId:d}=(0,c.useContext)(H.J),{isLoggedInUser:h}=(0,p.b)(),k=(0,g.useRelayEnvironment)(),b=(0,c.useRef)(null),f=(0,c.useCallback)(()=>{h&&null==b.current&&(b.current=u,(0,g.fetchQuery)(k,n(73230),{botId:u}).subscribe({complete:()=>{b.current=null},error:()=>{b.current=null}}))},[u,k,h,b]);(0,z.zw)(f);let _=h?r.balanceTooltipText:null,F=!!_,{openPaywall:C}=(0,m.rk)(),K=v.Z.pill_tooltip,{logImpression:M,logClick:w,getViewableImpressionData:I}=(0,y.hz)(t),{ref:T}=(0,W.Z)(X.Z.web_subscriptions,{additionalLogData:I(K)}),L=h&&0===r.numRemainingMessages&&!(null==s?void 0:s.isActive)&&i;(0,c.useEffect)(()=>{F&&L&&M(K)},[F,L,M,K]);let x=(0,c.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),L?(w(K),C()):d(u)},[C,w,K,u,L,d]),E=r.balanceTooltipType==$.warning?Q().tooltipNotMuted:Q().tooltipMuted;return F?(0,o.jsxs)(S.t9,{className:(0,A.$)(Q().noFreeMessageTooltip,E,h?Q().tooltipClickable:Q().tooltipNonClickable),onClick:x,ref:L?T:void 0,children:[_,h&&(0,o.jsx)(G.Z,{className:Q().chevronIcon})]}):null},inputFooter_ChatMessageSendButton=e=>{let{bot:a,viewer:l,className:t,...s}=e,i=(0,g.useFragment)(n(72612),a),r=(0,g.useFragment)(n(19117),l);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(S.DF,{className:(0,A.$)(Z().sendButton,t),...s,children:(0,o.jsx)(U.Z,{})}),(0,o.jsx)(inputFooter_ChatMessageLimitTooltip,{bot:i,viewer:r})]})},J=n(46336),Y=n(71953),ee=n.n(Y);let useValueChangeListeners=e=>{let a=(0,c.useRef)([]),n=(0,c.useCallback)(e=>{a.current.forEach(a=>a(e))},[]),l=(0,c.useCallback)(e=>{n(e.target.value)},[n]),t=(0,c.useCallback)(n=>{if(a.current.push(n),1===a.current.length){var t;null===(t=e.current)||void 0===t||t.addEventListener("input",l)}},[e,l]),s=(0,c.useCallback)(n=>{if(a.current=a.current.filter(e=>e!==n),0===a.current.length){var t;null===(t=e.current)||void 0===t||t.removeEventListener("input",l)}},[e,l]);return(0,c.useEffect)(()=>()=>{var a;null===(a=e.current)||void 0===a||a.removeEventListener("input",l)},[e,l]),{addValueChangedListener:t,removeValueChangedListener:s,onValueChange:n}},ea=(0,c.forwardRef)((e,a)=>{let{className:n,onInput:l,onChange:t,footer:s,...i}=e,r=(0,c.useRef)(null),u=(0,c.useRef)(null),d=(0,c.useCallback)(()=>{r.current&&u.current&&(r.current.dataset.replicatedValue=u.current.value)},[]),g=(0,c.useCallback)(e=>{null==l||l(e),d()},[l,d]),{addValueChangedListener:m,removeValueChangedListener:p,onValueChange:h}=useValueChangeListeners(u);return(0,c.useImperativeHandle)(a,()=>({focus:()=>{var e;return null===(e=u.current)||void 0===e?void 0:e.focus()},blur:()=>{var e;return null===(e=u.current)||void 0===e?void 0:e.blur()},addEventListener:(e,a,n)=>{var l;return null===(l=u.current)||void 0===l?void 0:l.addEventListener(e,a,n)},removeEventListener:(e,a,n)=>{var l;return null===(l=u.current)||void 0===l?void 0:l.removeEventListener(e,a,n)},getValue:()=>{var e;return null===(e=u.current)||void 0===e?void 0:e.value},setValue:(e,a)=>{if(!u.current)return;let n=u.current.selectionStart,l=u.current.selectionEnd;u.current.value=e,u.current.scrollTo(0,u.current.scrollHeight),d(),a&&u.current.setSelectionRange(...a(n,l)),h(e)},addValueChangedListener:m,removeValueChangedListener:p,getSelectionStart:()=>{var e;return null===(e=u.current)||void 0===e?void 0:e.selectionStart},getSelectionEnd:()=>{var e;return null===(e=u.current)||void 0===e?void 0:e.selectionEnd},setSelectionRange:(e,a,n)=>{var l;return null===(l=u.current)||void 0===l?void 0:l.setSelectionRange(e,a,null!=n?n:"none")}}),[d,m,p,h]),(0,o.jsxs)("div",{className:(0,A.$)(ee().growWrap,n),ref:r,children:[(0,o.jsx)("textarea",{className:ee().textArea,ref:u,rows:1,onInput:g,onChange:t,...i}),s]})});ea.displayName="GrowingTextArea";var en=n(52667);(t=i||(i={}))[t.BACKSPACE=8]="BACKSPACE",t[t.TAB=9]="TAB",t[t.ENTER=13]="ENTER",t[t.SPACE=32]="SPACE",t[t.ESC=27]="ESC",t[t.UP=38]="UP",t[t.DOWN=40]="DOWN",t[t.PAGE_UP=33]="PAGE_UP",t[t.PAGE_DOWN=34]="PAGE_DOWN",t[t.HOME=36]="HOME",t[t.END=35]="END";var el=i;let getLastHumanMessageText=e=>{if(!e)return null;for(let a=e.length-1;a>=0;a--){let{node:l}=(0,g.readInlineData)(n(87330),e[a]);if((0,en.Q1)(l))return l.text}return null},useOnKeyDown=(e,a,l,t,s,i,r,o)=>{let u=(0,g.useFragment)(n(91963),e),{shouldPromptSubscription:d,openPaywall:p}=(0,m.rk)(),h=(0,c.useCallback)(e=>{e.preventDefault(),!o&&d?(s(v.Z.limited_access_bot),p()):r?i():l()},[o,d,r,s,p,i,l]),y=(0,c.useCallback)(e=>{var n,l;if(!(null===(n=a.current)||void 0===n?void 0:n.getValue())){e.preventDefault();let n=getLastHumanMessageText(u);n&&(null===(l=a.current)||void 0===l||l.setValue(n),t())}},[u,a,t]);return(0,c.useCallback)(e=>{e.shiftKey||e.keyCode!=el.ENTER?e.keyCode==el.UP&&y(e):h(e)},[h,y])},et=(0,c.forwardRef)((e,a)=>{let{edges:l,bot:t,className:s,submitMessage:i,onChange:r,disabled:u,footer:d,placeholderText:p,viewer:h,onPaste:f}=e,_=(0,g.useFragment)(n(97369),h),F=(0,g.useFragment)(n(73938),l),S=(0,g.useFragment)(n(9883),t),C=(0,c.useRef)(null),{logClick:K}=(0,y.hz)(S),{shouldShowSignupWall:M,openSignupWall:w}=(0,J.zl)(),I=(0,c.useCallback)(()=>{var e;null===(e=C.current)||void 0===e||e.setValue(""),w(J.dh.sendMessage)},[w]),T=(0,k.lR)(S),L=M&&T,x=useOnKeyDown(F,C,i,r,K,I,L,_.isMultibotEnabled),{shouldPromptSubscription:E,openPaywall:A}=(0,m.rk)(),B=(0,c.useCallback)(()=>{var e;null===(e=C.current)||void 0===e||e.setValue(""),K(v.Z.limited_access_bot),A()},[K,A]),D=(0,c.useMemo)(()=>(0,b.Z)([C,a]),[C,a]),R=(0,c.useCallback)(()=>{!_.isMultibotEnabled&&E?B():L&&I()},[B,L,E,I,_.isMultibotEnabled]),N=(0,c.useRef)(!1),V=!_.isMultibotEnabled&&E?()=>{N.current||(B(),N.current=!0)}:L?I:void 0;return(0,o.jsx)(ea,{ref:D,className:s,placeholder:p,onFocus:V,onInput:R,onChange:r,onKeyDown:x,onPaste:f,disabled:u,footer:d})});et.displayName="ChatMessageTextArea";var es=n(41143),ei=n.n(es),er=n(22120),eo=n(63236);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e}).apply(this,arguments)}var microphone=function(e){return c.createElement("svg",_extends({viewBox:"0 0 16 27",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=c.createElement("path",{clipRule:"evenodd",d:"M4.235 1.803C4.848.823 6.013 0 8 0c1.986 0 3.152.824 3.765 1.803a3.826 3.826 0 0 1 .568 1.836V3.664s0 .003-1 .003h1v10.666h-1 1v.028a1.823 1.823 0 0 1-.01.176 3.827 3.827 0 0 1-.558 1.66C11.152 17.177 9.986 18 8 18c-1.987 0-3.152-.824-3.765-1.803a3.828 3.828 0 0 1-.568-1.836V14.336s0-.003 1-.003h-1V3.667h1-1v-.028a2.004 2.004 0 0 1 .01-.176 3.827 3.827 0 0 1 .558-1.66Zm1.432 1.874.002-.036a1.828 1.828 0 0 1 .262-.778C6.152 2.51 6.653 2 8 2s1.848.51 2.069.863a1.83 1.83 0 0 1 .264.814v10.646l-.002.036a1.83 1.83 0 0 1-.262.778c-.221.353-.722.863-2.07.863-1.346 0-1.847-.51-2.068-.863a1.828 1.828 0 0 1-.264-.814V3.677Zm-4.334 4.99a1 1 0 0 1 1 1v4.666l.001.03a5.657 5.657 0 0 0 .087.725c.09.49.27 1.13.62 1.76a4.464 4.464 0 0 0 1.62 1.69c.76.457 1.827.795 3.339.795s2.579-.338 3.34-.795a4.464 4.464 0 0 0 1.62-1.69c.349-.63.528-1.27.62-1.76a5.642 5.642 0 0 0 .086-.724V9.667a1 1 0 1 1 2 0v4.666h-1 1v.035a3.958 3.958 0 0 1-.016.302 7.653 7.653 0 0 1-.104.783 7.85 7.85 0 0 1-.839 2.366 6.464 6.464 0 0 1-2.338 2.434c-.902.541-2.013.914-3.37 1.037v3.377h4.334a1 1 0 0 1 0 2H2.667a1 1 0 1 1 0-2H7v-3.378c-1.356-.122-2.467-.495-3.369-1.036a6.463 6.463 0 0 1-2.339-2.434 7.852 7.852 0 0 1-.838-2.366 7.66 7.66 0 0 1-.118-1.015 3.637 3.637 0 0 1-.002-.07v-.032s0-.003 1-.003h-1V9.667a1 1 0 0 1 1-1Z"})))},eu=n(62341),ed=n(19029),ec=n(74929),eg=n(3350),em=n.n(eg),ep=n(6488),eh=n(39885);let getSpeechRecognition=()=>{let{userAgent:e}=window.navigator;return(0,ec.P)(e)?null:"undefined"!=typeof SpeechRecognition?SpeechRecognition:"undefined"!=typeof webkitSpeechRecognition?webkitSpeechRecognition:null},getMessageFromErrorEvent=(e,a)=>{switch(a.error){case"no-speech":return e("No speech was detected. Try again.");case"audio-capture":return e("No microphone was found. Ensure that a microphone is installed and that microphone settings are configured correctly.");case"not-allowed":return e("Permission to use microphone was denied. Update your browser permission settings and try again.");case"network":return e("A network error occurred. Check your internet connection and try again.");case"language-not-supported":return e("The language {{language}} is not supported by your browser.",{language:(null==a?void 0:a.target)&&"lang"in a.target&&a.target.lang||"en"});case"aborted":if("No speech detected"===a.message)return e("No speech was detected. Try again.");return null;default:return e("An error occurred: {{error}}",{error:a.error})}};let SpeechRecognitionError=class SpeechRecognitionError extends eu.n9{constructor(e){let a=[e.error,e.message].filter(Boolean).join(": ");super(a),this.name="SpeechRecognitionError"}};let logErrorEvent=e=>{("aborted"!==e.error||"No speech detected"===e.message)&&(0,eu.H)(new SpeechRecognitionError(e))},createRecognition=e=>{let{onStart:a,onEnd:n,onError:l,onResult:t}=e,s=getSpeechRecognition();ei()(s,"SpeechRecognition is not supported");let i=new s;return i.continuous=!0,i.interimResults=!0,i.onstart=a,i.onspeechend=()=>{i.stop()},i.onend=n,i.onerror=l,i.onresult=t,i},useSpeechRecognition=(e,a,n)=>{let{t:l}=(0,er.$G)(),[t,s]=(0,c.useState)(!1),i=(0,c.useRef)(!1),r=(0,c.useCallback)(()=>i.current,[]),o=(0,c.useContext)(eo.Z),u=(0,c.useRef)(null),d=(0,c.useCallback)(()=>{var e;null===(e=u.current)||void 0===e||e.stop(),u.current=null},[]),g=(0,c.useCallback)(()=>{var e;null===(e=u.current)||void 0===e||e.abort(),u.current=null},[]),m=(0,c.useCallback)(()=>{var t;let r=(null===(t=e.current)||void 0===t?void 0:t.getValue())||"",c=null==o?void 0:o.botId,g=null==o?void 0:o.model,m=null==o?void 0:o.chatId,p=createRecognition({onStart:()=>{var a,n;null===(a=e.current)||void 0===a||a.blur(),null===(n=e.current)||void 0===n||n.addEventListener("focus",d),s(!0),(0,ed.Z)("poe/action_log",{action_type:(0,eh.E)(ep.Z.start_voice_record),bot_id:c,chat_id:m,model_name:g})},onEnd:()=>{var a,n;s(!1),null===(a=e.current)||void 0===a||a.focus(),null===(n=e.current)||void 0===n||n.removeEventListener("focus",d),(0,ed.Z)("poe/action_log",{action_type:(0,eh.E)(ep.Z.finish_voice_record),bot_id:c,chat_id:m,model_name:g})},onError:e=>{logErrorEvent(e);let a=getMessageFromErrorEvent(l,e);if(a){var t;null===(t=n.current)||void 0===t||t.setTooltip(a)}},onResult:n=>{let{results:l}=n;if(u.current===p){let n=Array.from(l).filter(e=>e[0].confidence>0).map(e=>e[0].transcript).join("");if(n){var t;i.current=!0,null===(t=e.current)||void 0===t||t.setValue(r+n),a()}}}});u.current=p,p.start()},[e,a,s,n,d,l,o]);return(0,c.useEffect)(()=>{let a=e.current,resetVoiceInputWhenClearInput=e=>{""==e&&(i.current=!1)};return null==a||a.addValueChangedListener(resetVoiceInputWhenClearInput),()=>{null==a||a.removeValueChangedListener(resetVoiceInputWhenClearInput)}},[e]),(0,c.useEffect)(()=>()=>{g()},[g]),{isRunning:t,startRecognition:m,stopRecognition:d,abortRecognition:g,getVoiceInputUsed:r}},ey=(0,c.forwardRef)((e,a)=>{let{className:n,chatInputRef:l,onInputChange:t,userHasNoMessagesLeft:s,...i}=e,{shouldShowSignupWall:r,openSignupWall:u}=(0,J.zl)(),d=(0,c.useCallback)(()=>{u(J.dh.sendMessage)},[u]),g=(0,c.useRef)(null),{isRunning:m,startRecognition:p,stopRecognition:h,abortRecognition:y,getVoiceInputUsed:k}=useSpeechRecognition(l,t,g);return(0,c.useImperativeHandle)(a,()=>({startRecognition:p,stopRecognition:h,abortRecognition:y,getVoiceInputUsed:k}),[p,h,y,k]),(0,o.jsxs)(S.t9,{className:(0,A.$)(em().button,n),onClick:r&&s?d:m?h:p,"aria-selected":!!m,...i,children:[(0,o.jsx)(L,{ref:g}),(0,o.jsx)(microphone,{})]})});ey.displayName="ChatMessageVoiceInputButtonInner";let ek=(0,c.forwardRef)((e,a)=>{let[n,l]=(0,c.useState)(!1);return(0,c.useEffect)(()=>{l(!!getSpeechRecognition())},[]),n?(0,o.jsx)(ey,{ref:a,...e}):null});ek.displayName="ChatMessageVoiceInputButton";var eb=n(72566),ef=n(52958),e_=n(67991);let getFileSizeErrorMessage=(e,a,n)=>{let[l,t]=(0,ef.w)(e);return 0==l?n("The bot you are trying to chat with does not accept attachments."):a<=1?n("The file you tried to attach is too large. Please try uploading a file that is less than {{limit, number}}.",{limit:l,style:"unit",unit:t,unitDisplay:"short"}):a>1?n("The files you tried to attach are too large. Please try uploading files that are less than {{limit, number}} total.",{limit:l,style:"unit",unit:t,unitDisplay:"short"}):void 0};var inputFooter_useFileUpload=(e,a)=>{let{onFileChange:l,onError:t}=a,{uploadFileSizeLimit:s}=(0,g.useFragment)(n(35813),e),[i,r]=(0,c.useState)([]),o=(0,c.useRef)(0),u=(0,c.useRef)(0),d=(0,c.useRef)(new WeakMap),{t:m}=(0,er.$G)(),p=(0,c.useCallback)(e=>{let a;e.forEach(e=>{d.current.set(e,o.current++),(0,e_.a)(e)}),r(a=>{let n=[...a,...e];return null==l||l(n),n});let n=e.reduce((e,a)=>e+a.size,0);u.current+=n,u.current>s&&(a=getFileSizeErrorMessage(s,i.length,m)),a&&(null==t||t(a))},[i,l,t,s,m]),h=(0,c.useCallback)(e=>{let a;r(a=>{let n=a.filter((a,n)=>n!==e);return null==l||l(n),n});let n=i[e].size;u.current-=n,u.current>s&&(a=getFileSizeErrorMessage(s,i.length,m)||""),a&&(null==t||t(a))},[i,l,t,s,m]),y=(0,c.useCallback)(()=>{r(()=>(null==l||l([]),[])),u.current=0},[l]),k=i.map(e=>d.current.get(e)||0);return{files:i,fileIds:k,handleFileUpload:p,handleFileRemove:h,clearFiles:y,totalFileSize:u.current}};let importAddBotToChatModal=()=>n.e(2947).then(n.bind(n,12947)),eF=d()(()=>n.e(9510).then(n.bind(n,49510)),{loadableGenerated:{webpack:()=>[49510]},ssr:!1}),ev=(0,c.forwardRef)((e,a)=>{let{bot:l,viewer:t,edges:s,chat:i,onSubmitMessage:r,placeholderText:u,isBotResponding:d,fileHandlerRef:_,setAttachedFilesCount:S,searchHandle:C,shouldShowNewMemberWarningModal:K,selectBot:M,setInvalidMentionedBotHandle:w,disableSend:I}=e,T=(0,g.useFragment)(n(5466),l),L=(0,g.useFragment)(n(42785),s),E=(0,g.useFragment)(n(50467),t),A=(0,g.useFragment)(n(60352),i),B=(0,c.useRef)(null),{isLoggedInUser:D}=(0,p.b)(),R=(0,k.lR)(T),N=T.uploadFileSizeLimit,V=(0,c.useCallback)(e=>{var a,n;$((null===(n=z.current)||void 0===n?void 0:null===(a=n.getValue())||void 0===a?void 0:a.trim())===""&&0===e.length),null==S||S(e.length)},[S]),P=(0,c.useCallback)(e=>{var a;null===(a=B.current)||void 0===a||a.setTooltip(e)},[]),{files:O,fileIds:U,handleFileUpload:j,handleFileRemove:Z,clearFiles:H,totalFileSize:G}=inputFooter_useFileUpload(T,{onFileChange:V,onError:P});(0,c.useImperativeHandle)(_,()=>({handleFiles:j,clearAllFiles:H}),[j,H]);let z=(0,c.useRef)(null),W=(0,c.useRef)(null),q=(0,c.useMemo)(()=>(0,b.Z)([z,a]),[z,a]),[Q,$]=(0,c.useState)(!0),[X,J]=(0,c.useState)(!1),Y=0!==O.length,ee=(0,c.useRef)(null),ea=(0,c.useRef)(null),en=(0,c.useCallback)(e=>{let a=(0,g.readInlineData)(n(57806),e);if(ea.current=(null==a?void 0:a.handle)||null,M(a),e){var l;null===(l=z.current)||void 0===l||l.focus()}},[M]),el=(0,g.useRelayEnvironment)(),es=(0,c.useCallback)(async e=>{if(ea.current===e)return;if(ea.current=e,e.length<4||e.length>20){en(null),w(e);return}w(null);let a=await (0,g.fetchQuery)(el,n(7760),{handle:e,chatCode:(null==A?void 0:A.chatCode)||"",hasChat:!!A},{fetchPolicy:"store-or-network"}).toPromise();if(ea.current===e){var l;en((null==a?void 0:null===(l=a.bot)||void 0===l?void 0:l.canUserAccessBot)?null==a?void 0:a.bot:null),(null==a?void 0:a.bot)&&a.bot.canUserAccessBot||w(e)}},[el,A,en,w]),ei=(0,c.useCallback)(()=>{var e,a,n,l,t,s,i,r,o;let u=(null===(e=z.current)||void 0===e?void 0:e.getValue())||"";if($((null==u?void 0:u.trim())===""&&!Y),E.isMultibotEnabled){if(E.isMultibotV2Enabled){let e=eb.z.exec(u),d=null==e?void 0:null===(a=e.groups)||void 0===a?void 0:a.handle;void 0!==d?((null===(n=z.current)||void 0===n?void 0:n.getSelectionStart())||0)<=d.length+1?(null===(t=ee.current)||void 0===t||null===(l=t.setInput)||void 0===l||l.call(t,d.toLowerCase()),w(null)):(null===(i=ee.current)||void 0===i||null===(s=i.setInput)||void 0===s||s.call(i,null),es(d)):(null===(o=ee.current)||void 0===o||null===(r=o.setInput)||void 0===r||r.call(o,null),en(null),w(null))}else if(C){let e=k.ww.exec(u);if(null==e?void 0:e.groups){let a=e.groups.handle;C(a)}else C(null)}}},[Y,E.isMultibotEnabled,C,en,es,w,E.isMultibotV2Enabled]),{isDeleted:er}=(0,k.iZ)(T),eo=I||er||d||Q||!E.isMultibotEnabled&&!T.allowsImageAttachments&&G>N||E.isMultibotEnabled&&G>N||E.isMultibotV2Enabled&&X,eu=(0,c.useCallback)(()=>{var e,a;if(null===(e=W.current)||void 0===e||e.abortRecognition(),navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&(null===(a=z.current)||void 0===a||a.blur()),!eo)return r(z,W,O,H)},[z,W,O,H,eo,r]),ed=(0,c.useCallback)(()=>{var e;null===(e=z.current)||void 0===e||e.focus()},[z]),ec=(0,c.useRef)(!1);(0,c.useEffect)(()=>{var e;!D&&!0===ec.current||navigator.maxTouchPoints&&navigator.maxTouchPoints>0||(null===(e=z.current)||void 0===e||e.focus(),ec.current=!0)},[T.id,D]),(0,c.useEffect)(()=>{let e=z.current;return null==e||e.addValueChangedListener(ei),()=>{null==e||e.removeValueChangedListener(ei)}},[ei]);let eg=E.isMultibotEnabled||T.allowsImageAttachments||N>0,em=er||!T.allowsImageAttachments&&G>N,ep=eg&&E.isFilePasteEnabled,eh=function(e){let{handleFileUpload:a,isFilePasteEnabled:n,isFileInputDisabled:l}=e;return(0,c.useCallback)(e=>{if(l||!n)return;let t=function(e){var a,n;let l=Array.from((null===(a=e.clipboardData)||void 0===a?void 0:a.files)||[]);if(0===l.length)return[];let t=null===(n=e.clipboardData)||void 0===n?void 0:n.getData("text/html");return t&&!function(e){try{var a;let n=new DOMParser().parseFromString(e,"text/html");return 1===n.body.childElementCount&&(null===(a=n.body.firstElementChild)||void 0===a?void 0:a.tagName)==="IMG"}catch(e){return console.error("there was an issue parsing pasted html"),!1}}(t)?[]:l}(e);0!==t.length&&(a(t),e.preventDefault())},[a,n,l])}({isFileInputDisabled:em,isFilePasteEnabled:ep,handleFileUpload:j}),{shouldPromptSubscription:ey,openPaywall:ef}=(0,m.rk)(),{logClick:e_}=(0,y.hz)(T),ev=(0,c.useCallback)(()=>{e_(v.Z.limited_access_bot),ef()},[e_,ef]),[eS,eC]=(0,c.useState)(!1),eK=(0,c.useCallback)(()=>{if(navigator.maxTouchPoints&&navigator.maxTouchPoints>0){var e;null===(e=z.current)||void 0===e||e.blur()}eC(!0)},[eC]),eM=(0,c.useCallback)(()=>{eC(!1),eu()},[eC,eu]),ew=(0,c.useCallback)(()=>{eC(!1)},[eC]),eI=(0,c.useMemo)(()=>({close:ew,botHandle:T.handle,onSubmitAndClose:eM}),[T.handle,ew,eM]),eT=(0,c.useRef)(!1),eL=(0,c.useCallback)(()=>{if(E.isMultibotEnabled&&ey){ev();return}if(K){eK();return}eu(),eT.current||((0,f.nL)(f.wy.SendChatClicked),eT.current=!0)},[E.isMultibotEnabled,ey,eu,ev,eK,K]),ex=(0,c.useRef)(null);return(0,o.jsxs)(o.Fragment,{children:[E.isMultibotEnabled&&(0,o.jsx)(h.Z,{isOpen:eS,onRequestClose:ew,body:importAddBotToChatModal,bodyProps:eI,variant:"compact"}),(0,o.jsxs)("div",{ref:ex,className:F().inputContainer,onClickCapture:ed,children:[E.isMultibotV2Enabled&&(0,o.jsx)(eF,{className:F().botSelector,selectorRef:ee,anchorRef:ex,chatInputRef:z,chat:A,selectBot:en,onIsActiveChange:J}),(0,o.jsx)(et,{ref:q,edges:L,bot:T,className:F().textArea,submitMessage:eL,onChange:ei,disabled:er,placeholderText:u,onPaste:eh,footer:(0,o.jsx)(inputFooter_ChatMessageInputAttachments,{files:O,viewer:E,fileIds:U,onFileRemoved:Z}),viewer:E}),eg&&(0,o.jsx)(x,{viewer:E,disabled:em,onFileUpload:j,ref:B}),(0,o.jsx)(ek,{ref:W,className:F().voiceInputButton,chatInputRef:z,onInputChange:ei,disabled:er,userHasNoMessagesLeft:R}),(0,o.jsx)(inputFooter_ChatMessageSendButton,{className:F().sendButton,bot:T,viewer:E,onClick:eL,disabled:eo})]})]})});ev.displayName="ChatMessageInputContainer";var eS=ev},72566:function(e,a,n){"use strict";n.d(a,{z:function(){return l}});let l=RegExp("^(?<mention>\\s*@(?<handle>\\S*)\\s?)")},81005:function(e,a,n){"use strict";var l=n(85893),t=n(67294),s=n(22578),i=n(2012),r=n(41019);let importBlockingEmailInputModal=()=>Promise.all([n.e(3292),n.e(8205)]).then(n.bind(n,66735));a.Z=e=>{let{viewer:a}=e,o=(0,s.useFragment)(n(29195),a),u=(0,t.useCallback)(()=>{},[]),{isLoggedInUser:d}=(0,i.b)(),c=(0,t.useMemo)(()=>({closeModal:u}),[u]);return(0,l.jsx)(r.Z,{isOpen:d&&o.enableBlockingEmailInputModal&&!o.primaryEmail,onRequestClose:u,body:importBlockingEmailInputModal,bodyProps:c,shouldCloseOnOverlayClick:!1,showCloseButton:!1})}},23457:function(e,a,n){"use strict";n.d(a,{Z:function(){return patterns_WarningBanner}});var l,t,s=n(85893),i=n(67294);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e}).apply(this,arguments)}var caution_2=function(e){return i.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},e),l||(l=i.createElement("path",{d:"M8.001 12.333a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM7.999 10.167c.366 0 .666-.3.666-.667V6.167c0-.367-.3-.667-.666-.667-.367 0-.667.3-.667.667V9.5c0 .367.3.667.667.667Z"})),t||(t=i.createElement("path",{d:"M14.107 11.173 9.734 3.527a2 2 0 0 0-2.727-.747c-.307.18-.567.44-.74.747l-4.373 7.646c-.267.467-.334 1-.194 1.52.14.514.474.947.94 1.214.3.173.647.266.994.266h8.74c1.1 0 2-.9 2-2a2.075 2.075 0 0 0-.267-1Zm-1.74 1.66H3.634a.665.665 0 0 1-.647-.493.642.642 0 0 1 .067-.507L7.42 4.187a.664.664 0 0 1 1.153 0l4.374 7.646c.06.1.087.214.087.334a.664.664 0 0 1-.667.666Z"})))},r=n(34616),o=n(15490),u=n.n(o),patterns_WarningBanner=e=>{let{className:a,text:n}=e;return(0,s.jsxs)("div",{className:(0,r.$)(u().banner,a),children:[(0,s.jsx)(caution_2,{}),n]})}},27488:function(e,a,n){"use strict";n.d(a,{R8:function(){return createLocalMessageAttachment},f3:function(){return setMessageState},mH:function(){return createLocalChatMessage}});var l=n(41143),t=n.n(l),s=n(44311);n(16761);let createLocalFile=(e,a)=>{let n=e.get(a.id)||e.create(a.id,"File");return t()("File"===n.getType(),"Expected ".concat(a.id," to be a File, not ").concat(n.getType())),n.setValue(a.id,"id"),n.setValue(a.mimeType,"mimeType"),n.setValue(a.size,"size"),n},createLocalMessageAttachment=(e,a)=>{let n=e.get(a.id)||e.create(a.id,"Attachment");return t()("Attachment"===n.getType(),"Expected ".concat(a.id," to be an Attachment, not ").concat(n.getType())),n.setValue(a.id,"id"),n.setValue(a.attachmentId,"attachmentId"),n.setValue(a.name,"name"),n.setValue(a.url,"url"),n.setValue(a.isInline,"isInline"),n.setValue(!0,"isOptimistic"),n.setLinkedRecord(createLocalFile(e,a.file),"file"),n},createLocalChatMessage=(e,a)=>{let l=e.get(a.id)||e.create(a.id,"Message");if(t()("Message"===l.getType(),"Expected ".concat(a.id," to be a Message, not ").concat(l.getType())),l.setValue(a.id,"id"),l.setValue(a.messageId,"messageId"),l.setValue(a.author,"author"),l.setValue(a.clientNonce,"clientNonce"),l.setValue(a.contentType,"contentType"),l.setValue(a.creationTime,"creationTime"),l.setValue(a.isOptimistic,"isOptimistic"),l.setValue(a.messageId,"messageId"),l.setValue(a.sourceType,"sourceType"),l.setValue(a.state,"state"),l.setValue(a.suggestedReplies.slice(),"suggestedReplies"),l.setValue(a.text,"text"),l.setValue(a.textLengthOnCancellation,"textLengthOnCancellation"),l.setValue(a.timeoutLevel,"timeoutLevel"),l.setValue(a.vote,"vote"),l.setLinkedRecords([],"followupActions"),l.setLinkedRecords(a.attachmentIds.map(a=>e.get(a)).filter(e=>null!=e),"attachments"),a.bot){let{id:i}=(0,s.readInlineData)(n(65527),a.bot),r=e.get(i);t()(r,"Expected bot record ".concat(i," to exist")),l.setLinkedRecord(r,"bot")}else l.setValue(null,"bot");if(l.setLinkedRecords([],"recommendedBots"),a.commandType){let n=e.create(a.id+":command","Command");n.setValue(a.commandType,"commandType"),l.setLinkedRecord(n,"command")}return l},setMessageState=(e,a)=>{t()("Message"===e.getType(),"Cannot set status of record of type ".concat(e.getType())),e.setValue(a,"state")}},44912:function(e,a,n){"use strict";n.d(a,{Ci:function(){return replaceMessageInChat},Ey:function(){return getLastMessage},OJ:function(){return addMessageToChat},T5:function(){return removeMessageFromChat},WL:function(){return clearOptimisticMessages},kz:function(){return replaceOrAddMessageEdgeInChat},n3:function(){return addMessageRecordToChat}});var l=n(41143),t=n.n(l),s=n(44311),i=n(81032);let getChatConnection=e=>{t()("Chat"===e.getType(),"Cannot add messages to a record of type ".concat(e.getType()));let a=s.ConnectionHandler.getConnection(e,i.U);return t()(a,"Cannot find connection ".concat(i.U)),a},r=n(51151),isMessageInChat=(e,a)=>{let n=getChatConnection(e),l=n.getLinkedRecords("edges");if(!l)return!1;let t=l.map(e=>{var a;return null===(a=e.getLinkedRecord("node"))||void 0===a?void 0:a.getDataID()});return t.includes(a)},getLastMessage=e=>{let a=getChatConnection(e),n=a.getLinkedRecords("edges");t()(n,"No edges found in chat connection");let l=n.sort((e,a)=>{var n,l;let s=null===(n=e.getLinkedRecord("node"))||void 0===n?void 0:n.getValue("creationTime"),i=null===(l=a.getLinkedRecord("node"))||void 0===l?void 0:l.getValue("creationTime");return t()(s,"Node A time is ".concat(s)),t()(i,"Node B time is ".concat(i)),s<i?-1:1}),s=l[n.length-1];return null==s?void 0:s.getLinkedRecord("node")},addMessageToChat=(e,a,n)=>{let l=(0,s.readInlineData)(r,n),i=e.get(l.id);return t()(i,"Cannot find message record with id ".concat(l.id)),addMessageRecordToChat(e,a,i)},addMessageRecordToChat=(e,a,n)=>{t()("Chat"===a.getType(),"Cannot add messages to a record of type ".concat(a.getType())),t()("Message"===n.getType(),"Cannot add record of type ".concat(n.getType()," to Chat"));let l=getChatConnection(a),i=s.ConnectionHandler.createEdge(e,l,n,"MessageEdge");return s.ConnectionHandler.insertEdgeAfter(l,i),a.setLinkedRecord(n,"lastMessage"),i},removeMessageFromChat=(e,a)=>{var n;let l=getChatConnection(e);s.ConnectionHandler.deleteNode(l,a);let t=null===(n=getChatConnection(e).getLinkedRecords("edges"))||void 0===n?void 0:n.map(e=>e.getLinkedRecord("node")).filter(e=>(null==e?void 0:e.getDataID())!==a),i=(null==t?void 0:t[t.length-1])||null;null==i?e.setValue(null,"lastMessage"):e.setLinkedRecord(i,"lastMessage")},replaceMessageInChat=(e,a,n,l)=>{let i=(0,s.readInlineData)(r,l),o=e.get(i.id);t()("Chat"===a.getType(),"Cannot remove message edges from a record of type ".concat(a.getType())),t()(o,"Unable to find message of id ".concat(i.id));let u=getChatConnection(a),d=u.getLinkedRecords("edges");t()(d,"No edges found in chat connection");let c=d.findIndex(e=>{var a;return(null===(a=e.getLinkedRecord("node"))||void 0===a?void 0:a.getValue("id"))===n});return -1!==c&&(d[c]=s.ConnectionHandler.createEdge(e,u,o,"MessageEdge"),u.setLinkedRecords(d,"edges"),c===d.length-1&&a.setLinkedRecord(o,"lastMessage"),!0)},replaceMessageEdgeInChat=(e,a,n,l)=>{let i=(0,s.readInlineData)(r,l),o=e.get(i.id);t()("Chat"===a.getType(),"Cannot remove message edges from a record of type ".concat(a.getType())),t()(o,"Unable to find message of id ".concat(i.id)),t()("MessageEdge"===n.getType(),"Cannot remove record of type ".concat(n.getType()," from Chat"));let u=getChatConnection(a),d=u.getLinkedRecords("edges");t()(d,"No edges found in chat connection");let c=s.ConnectionHandler.createEdge(e,u,o,"MessageEdge"),g=!1,m=d.map((e,l)=>e.getDataID()===n.getDataID()?(g=!0,l===d.length-1&&a.setLinkedRecord(o,"lastMessage"),c):e);return u.setLinkedRecords(m,"edges"),g},replaceOrAddMessageEdgeInChat=(e,a,n,l)=>{t()("Chat"===a.getType(),"Cannot remove message edges from a record of type ".concat(a.getType())),t()(!n||"MessageEdge"===n.getType(),"Cannot remove record of type ".concat(n?n.getType():n," from Chat"));let i=(0,s.readInlineData)(r,l),o=e.get(i.id),u=isMessageInChat(a,i.id);if(u)return o;let d=!0;if(n&&(d=!replaceMessageEdgeInChat(e,a,n,l)),d){t()(o,"Unable to find message of id ".concat(i.id));let n=getChatConnection(a),l=s.ConnectionHandler.createEdge(e,n,o,"MessageEdge");s.ConnectionHandler.insertEdgeAfter(n,l),a.setLinkedRecord(o,"lastMessage")}return o},clearOptimisticMessages=e=>{let a=getChatConnection(e),n=a.getLinkedRecords("edges");if(n){let l=null;n.forEach(e=>{let n=e.getLinkedRecord("node");(null==n?void 0:n.getValue("isOptimistic"))?s.ConnectionHandler.deleteNode(a,n.getDataID()):l=n}),e.setLinkedRecord(l,"lastMessage")}}},64076:function(e,a,n){"use strict";n.d(a,{Gx:function(){return createOptimisticHumanMessage},Xw:function(){return createOptimisticCommandMessage},dS:function(){return createOptimisticBotMessage},jH:function(){return createOptimisticMessageAttachment},sC:function(){return createOptimisticChatBreak}});var l=n(41143),t=n.n(l),s=n(44311),i=n(85649),r=n(89083),o=n(31268),u=n(8611),d=n(50530),c=n(27488);let generateRandomNumber=()=>Math.floor(1e9*Math.random()),generateOptimisticId=(e,a)=>{let n,l;do n=generateRandomNumber(),l="Optimistic-".concat(a,"-").concat(n);while(e.get(l));return[l,n]},createOptimisticMessageAttachment=async(e,a)=>{let n;let l=URL.createObjectURL(a);return(0,s.commitLocalUpdate)(e,e=>{let[t,s]=generateOptimisticId(e,"MessageAttachment"),[i]=generateOptimisticId(e,"File"),r=(0,c.R8)(e,{id:t,attachmentId:s,name:a.name,url:l,isInline:!1,file:{id:i,size:a.size,mimeType:a.type}});n=r.getDataID()}),t()((0,d.H)(n),"attachmentId should be a string"),n},createOptimisticHumanMessage=(e,a)=>{let{prompt:n,attachmentIds:l=[],source:t,clientNonce:s,contentType:r}=a,[o,d]=generateOptimisticId(e,"HumanMessage");return(0,c.mH)(e,{id:o,messageId:d,attachmentIds:l,author:i.Z.human,clientNonce:s,contentType:r,creationTime:1e3*Date.now(),hasCitations:!1,isOptimistic:!0,sourceType:t.sourceType,state:u.Z.complete,followupActions:[],suggestedReplies:[],text:n,textLengthOnCancellation:null,timeoutLevel:0,vote:null,bot:null})},createOptimisticBotMessage=(e,a)=>{let{bot:l,contentType:t,text:i="",state:r=u.Z.incomplete}=a,{nickname:d,...g}=(0,s.readInlineData)(n(95101),l),[m,p]=generateOptimisticId(e,"BotMessage");return(0,c.mH)(e,{id:m,messageId:p,attachmentIds:[],author:d,clientNonce:null,contentType:t,creationTime:1e3*Date.now(),hasCitations:!1,isOptimistic:!0,sourceType:o.Z.chat_input,state:r,followupActions:[],suggestedReplies:[],text:i,textLengthOnCancellation:null,timeoutLevel:0,vote:null,bot:g})},createOptimisticChatBreak=(e,a)=>{let{clientNonce:n}=a,[l,t]=generateOptimisticId(e,"ChatBreakMessage");return(0,c.mH)(e,{id:l,messageId:t,attachmentIds:[],author:i.Z.chat_break,clientNonce:n,contentType:r.Z.text_plain,creationTime:1e3*Date.now(),hasCitations:!1,isOptimistic:!0,sourceType:o.Z.chat_input,state:u.Z.complete,followupActions:[],suggestedReplies:[],text:"",textLengthOnCancellation:null,timeoutLevel:0,vote:null,bot:null})},createOptimisticCommandMessage=(e,a)=>{let{clientNonce:n,text:l,commandType:t}=a,[s,d]=generateOptimisticId(e,"CommandMessage");return(0,c.mH)(e,{id:s,messageId:d,attachmentIds:[],author:i.Z.command,clientNonce:n,contentType:r.Z.text_plain,creationTime:1e3*Date.now(),hasCitations:!1,isOptimistic:!0,sourceType:o.Z.chat_input,state:u.Z.complete,followupActions:[],suggestedReplies:[],text:l,textLengthOnCancellation:null,timeoutLevel:0,vote:null,bot:null,commandType:t})}},21774:function(e,a,n){"use strict";n.d(a,{Mo:function(){return clearNonce},Us:function(){return useResendMessage},gc:function(){return setNonceArgs}});var l=n(41143),t=n.n(l),s=n(67294),i=n(22120),r=n(22578),o=n(44311),u=n(2197),d=n(59519),c=n(44912),g=n(24772);let m=new Map,getArgs=e=>{let a=m.get(e);if(!a)throw Error("No args for nonce ".concat(e));return a},setNonceArgs=(e,a)=>m.set(e,a),clearNonce=e=>m.delete(e),resendMessage=e=>{let{environment:a,message:l,bot:s,chat:i,viewer:r,setToast:u,setBotDetailsSidebar:d,onSuccessfulMessageSend:m,t:p}=e,{id:h,isOptimistic:y,clientNonce:k}=(0,o.readInlineData)(n(71669),l),b=(0,o.readInlineData)(n(17048),i),f=(0,o.readInlineData)(n(14973),s),_=(0,o.readInlineData)(n(10214),r);t()(y&&k,"Message must be optimistic to resend");let{optimisticUpdate:F,...v}=getArgs(k);(0,o.commitLocalUpdate)(a,e=>{let a=e.get(b.id);t()(a,"Expected chat record ".concat(b.id," to exist")),(0,c.T5)(a,h)}),a.revertUpdate(F),(0,g.b)({environment:a,chat:b,bot:f,viewer:_,setToast:u,setBotDetailsSidebar:d,onSuccessfulMessageSend:m,t:p,...v})},useResendMessage=e=>{let{message:a,chat:n,viewer:l,bot:t}=e,o=(0,r.useRelayEnvironment)(),c=(0,u.ZP)(),g=(0,d.X)(),{t:m}=(0,i.$G)();return(0,s.useCallback)(function(){let{onSuccessfulMessageSend:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};resendMessage({environment:o,message:a,bot:t,chat:n,viewer:l,setToast:c,setBotDetailsSidebar:g,onSuccessfulMessageSend:a=>{null==e||e(a)},t:m})},[o,c,g,a,t,n,l,m])}},24772:function(e,a,n){"use strict";n.d(a,{b:function(){return sendMessage},$:function(){return useSendMessage}});var l=n(41143),t=n.n(l),s=n(67294),i=n(22120),r=n(22578),o=n(2197),u=n(37650),d=n(36025),c=n(59519),g=n(46857),m=n(67275),p=n(90578),h=n(50530),y=n(47875),k=n(8611),b=n(81032),f=n(44311),_=n(89083),chat_getChatContentType=e=>{let{defaultBotObject:a}=(0,f.readInlineData)(n(38117),e);return a.hasMarkdownRendering?_.Z.text_markdown:_.Z.text_plain},F=n(64211),v=n(57708),S=n(27488),C=n(44912),K=n(64076),M=n(21774);let prepareUploadables=e=>{if(!e)return[null,null];let a=Array.from(e).reduce((e,a,n)=>({...e,["file".concat(n)]:a}),{});return[a,Array.from(Object.keys(a))]},w=n(53398),sendMessage=async e=>{let{environment:a,bot:l,chat:s,viewer:i,prompt:o,source:c,files:m=[],existingAttachments:k=[],setToast:f,setBotDetailsSidebar:_,onSuccessfulMessageSend:F=()=>{},clientNonce:S,t:C}=e;(0,p.Si)();let K=(0,g.h0)(),{id:I,chatId:T,isOptimistic:L,defaultBotObject:x,...E}=(0,r.readInlineData)(n(92750),s),A=(0,r.readInlineData)(n(88530),l),{useMultibot:B}=(0,r.readInlineData)(n(30232),i),D=k.map(e=>(0,r.readInlineData)(n(39574),e)),R=S||(0,b.C)(),N={storeUpdater:e=>{L||(0,v.x6)(e,I),(0,u.A7)(e,A.id)}};(0,M.gc)(R,{prompt:o,files:m,source:c,optimisticUpdate:N});let{optimisticHumanMessageId:V,optimisticHumanMessageEdgeId:P}=await onMessageSendChatUpdate({environment:a,chat:E,existingAttachments:D,prompt:o,files:m,source:c,clientNonce:R}),[O,U]=prepareUploadables(m),j=await K;a.applyUpdate(N),(0,r.commitMutation)(a,{mutation:w,variables:{chatId:L?null:T,shouldFetchChat:!!L,bot:x.nickname,query:o,messagePointsDisplayPrice:A.messagePointLimit.displayMessagePointPrice,source:c,clientNonce:R,attachments:U,existingMessageAttachmentsIds:D.map(e=>e.attachmentId),sdid:j},uploadables:O,updater:(e,a)=>{var n,l,t;if((null===(n=a.messageEdgeCreate)||void 0===n?void 0:n.status)===y.Z.success&&(null===(l=a.messageEdgeCreate)||void 0===l?void 0:l.message)){onSendSuccessUpdater(e,{bot:a.messageEdgeCreate.bot,chat:E,optimisticHumanMessageEdgeId:P,messageData:a.messageEdgeCreate.message.node},B);let n=a.messageEdgeCreate.chat,l=a.messageEdgeCreate.bot;L&&n&&l&&newChatUpdater(e,{bot:l,chat:n,message:a.messageEdgeCreate.message.node,optimisticChatId:I},B),a.messageEdgeCreate.chat?((0,v.eM)(e,I),(0,v.x6)(e,a.messageEdgeCreate.chat.id)):(0,v.x6)(e,I),(0,u.A7)(e,A.id)}else onSendFailureUpdater(e,{chatNodeId:I,optimisticHumanMessageEdgeId:P,errorMessage:null===(t=a.messageEdgeCreate)||void 0===t?void 0:t.statusMessage})},onCompleted:e=>{a.revertUpdate(N);let n=onSendMessageCompleted(e,f,_,V,R);n&&F(e)},onError:()=>{(0,r.commitLocalUpdate)(a,e=>{onSendFailureUpdater(e,{chatNodeId:I,optimisticHumanMessageEdgeId:P,errorMessage:window.navigator.onLine?C("Message failed to send."):C("Unable to send this message. Check your internet connection.")})})}}),t()((0,h.h)(V),"Expected optimistic human message id to be a number"),(0,d.CE)(V,T)},onMessageSendChatUpdate=async e=>{let a,l,{environment:s,chat:i,prompt:o,files:u,existingAttachments:d,source:c,clientNonce:g}=e,{id:m,...p}=(0,r.readInlineData)(n(4690),i),y=d.map(e=>(0,r.readInlineData)(n(19984),e).id),k=await Promise.all(u.map(e=>(0,K.jH)(s,e))),b=chat_getChatContentType(p);return(0,r.commitLocalUpdate)(s,e=>{let n=e.get(m);t()(n,"Expected Chat record with id ".concat(m," to exist when sending a message"));let s=(0,K.Gx)(e,{prompt:o,attachmentIds:[...y,...k],source:c,clientNonce:g,contentType:b}),i=(0,C.n3)(e,n,s);a=i.getDataID(),l=s.getValue("messageId")}),t()((0,h.h)(l),"Expected optimistic human message id to be a number"),t()(a,"Expected optimistic human message edge id to exist"),{optimisticHumanMessageId:l,optimisticHumanMessageEdgeId:a}},onSendMessageCompleted=(e,a,n,l,s)=>{let i=e.messageEdgeCreate.status;if(i!==y.Z.success)return!1;let r=getErrorMessageFromFailedUrls(e.messageEdgeCreate.failedUrls);return r&&a({type:o.pC.error,content:r}),n(e.messageEdgeCreate.bot,!1),t()(e.messageEdgeCreate.message,"No message on a successful send message mutation"),(0,d.Ot)(l,e.messageEdgeCreate.message.node.messageId),(0,M.Mo)(s),!0},getErrorMessageFromFailedUrls=e=>{if(0===e.length)return null;let a=e[0].reason;if(1===e.length)switch(a){case"fetch_error":return"Failed to fetch ".concat(e[0].url," because of a problem crawling the URL.");case"over_budget":return"Failed to fetch ".concat(e[0].url," because it was too large. Please keep crawled web pages to <100 MB total.");case"unsupported_content_type":return"Failed to fetch ".concat(e[0].url," because it was not a supported content type.");default:return"Failed to fetch ".concat(e[0].url,".")}switch(a){case"fetch_error":return"Failed to fetch ".concat(e.length," urls because of problems crawling them.");case"over_budget":return"Failed to fetch ".concat(e.length," urls because they were too large. Please keep crawled web pages to <100 MB total.");case"unsupported_content_type":return"Failed to fetch ".concat(e.length," urls because of unsupported content types.");default:return"Failed to fetch ".concat(e.length," urls.")}},onSendSuccessUpdater=(e,a,l)=>{let{bot:s,chat:i,optimisticHumanMessageEdgeId:o,messageData:u}=a,{id:d,defaultBotObject:c,...g}=(0,r.readInlineData)(n(97048),i),m=(0,r.readInlineData)(n(60706),l?s:c),p=e.get(d),h=e.get(o);t()(p,"Expected Chat record with id ".concat(d," to exist when sending a message"));let y=(0,C.kz)(e,p,h,u),k=(0,C.Ey)(p);if((null==k?void 0:k.getDataID())===(null==y?void 0:y.getDataID())){let a=chat_getChatContentType(g),n=(0,K.dS)(e,{contentType:a,bot:m}),l=n.getValue("messageId");l&&(0,F.OE)(l,{source:"sendMessage",botId:m.botId}),(0,C.n3)(e,p,n)}},newChatUpdater=(e,a,l)=>{let{bot:s,chat:i,message:o,optimisticChatId:u}=a,d=(0,r.readInlineData)(n(87065),i),{id:c}=(0,r.readInlineData)(n(13182),o),g=(0,r.readInlineData)(n(7741),l?s:d.defaultBotObject);(0,m.mK)(d.chatId,u);let p=e.get(d.id);t()(p,"Cannot find chat record with id ".concat(d.id)),e.getRoot().setLinkedRecord(p,"chatOfCode",{chatCode:d.chatCode});let h=(0,C.Ey)(p);if((null==h?void 0:h.getDataID())===c){let a=chat_getChatContentType(d),n=(0,K.dS)(e,{contentType:a,bot:g});(0,C.n3)(e,p,n)}},onSendFailureUpdater=(e,a)=>{var n;let{chatNodeId:l,optimisticHumanMessageEdgeId:s,errorMessage:i}=a,r=e.get(l),o=null===(n=e.get(s))||void 0===n?void 0:n.getLinkedRecord("node");t()(r,"Expected Chat record with id ".concat(l," to exist when sending a message")),t()(o,"Expected optimistic human message to exist after sending a message"),(0,S.f3)(o,k.Z.error),o.setValue(i,"errorMessage")},useSendMessage=e=>{let{source:a,bot:n,chat:l,viewer:t}=e,u=(0,r.useRelayEnvironment)(),d=(0,o.ZP)(),g=(0,c.X)(),{t:m}=(0,i.$G)(),p=(0,s.useCallback)(async e=>{let{prompt:s,files:i,existingAttachments:r,source:o,onSuccessfulMessageSend:c,clientNonce:p}=e;return await sendMessage({environment:u,bot:n,chat:l,viewer:t,prompt:s,files:i,existingAttachments:r,source:o||a,setToast:d,setBotDetailsSidebar:g,onSuccessfulMessageSend:e=>{null==c||c(e)},clientNonce:p,t:m})},[n,l,t,u,d,g,a,m]);return p}},67991:function(e,a,n){"use strict";n.d(a,{K:function(){return l},a:function(){return preloadFile}});let l=["image/jpeg","image/png"];function preloadFile(e){if(!FileReader||0!==e.size)return;let a=new FileReader;a.onload=()=>{},a.readAsBinaryString(e)}},8655:function(e,a,n){"use strict";n(67294),a.Z=function(e){return a=>{e.forEach(e=>{"function"==typeof e?e(a):null!=e&&(e.current=a)})}}},31268:function(e,a){"use strict";var n,l;(l=n||(n={})).welcome_topic="welcome_topic",l.linked_phrase="linked_phrase",l.suggested_reply="suggested_reply",l.chat_input="chat_input",l.continue_conversation="continue_conversation",l.quora_machine_answer_interaction="quora_machine_answer_interaction",l.quora_ask_new_question_interaction="quora_ask_new_question_interaction",l.conversation_starter="conversation_starter",l.resend_followup="resend_followup",l.home_page_conversation_starter="home_page_conversation_starter",l.cross_bot_chat_input="cross_bot_chat_input",l.in_chat_bot_recommendation="in_chat_bot_recommendation",a.Z=n},74766:function(e,a){"use strict";var n,l;(l=n||(n={})).home_page_input="home_page_input",l.chat_history_input="chat_history_input",l.chat_settings_new_chat_button="chat_settings_new_chat_button",l.plus_new_chat_button="plus_new_chat_button",l.introduction_suggested_reply="introduction_suggested_reply",l.home_page_conversation_starter="home_page_conversation_starter",a.Z=n},70442:function(e){e.exports={button:"ChatMessageFileInputButton_button___6Emy",input:"ChatMessageFileInputButton_input__svNx4"}},47180:function(e){e.exports={"compact-only":"only screen and (max-width : 684px)",container:"ChatMessageInputAttachments_container__AAxGu",attachment:"ChatMessageInputAttachments_attachment__ZTrHT"}},38154:function(e){e.exports={"compact-only":"only screen and (max-width : 684px)",inputContainer:"ChatMessageInputContainer_inputContainer__s2AGa",botSelector:"ChatMessageInputContainer_botSelector__5QwRE",textArea:"ChatMessageInputContainer_textArea__fNi6E",sendButton:"ChatMessageInputContainer_sendButton__dBjTt",fileInput:"ChatMessageInputContainer_fileInput__9lLAY"}},68702:function(e){e.exports={noFreeMessageTooltip:"ChatMessageLimitTooltip_noFreeMessageTooltip__dMRGn",tooltipClickable:"ChatMessageLimitTooltip_tooltipClickable__gsAxK",tooltipNonClickable:"ChatMessageLimitTooltip_tooltipNonClickable__W6ZwL",tooltipMuted:"ChatMessageLimitTooltip_tooltipMuted__j1QBl",tooltipNotMuted:"ChatMessageLimitTooltip_tooltipNotMuted__S91Y8",chevronIcon:"ChatMessageLimitTooltip_chevronIcon__6MFcg"}},92002:function(e){e.exports={sendButton:"ChatMessageSendButton_sendButton__4ZyI4"}},3350:function(e){e.exports={button:"ChatMessageVoiceInputButton_button__NjXno",pulse:"ChatMessageVoiceInputButton_pulse__5F2SB",fadeInUpAndOut:"ChatMessageVoiceInputButton_fadeInUpAndOut__NP3s1"}},81952:function(e){e.exports={tooltip:"Tooltip_tooltip__1Q3kv",fadeInUpAndOut:"Tooltip_fadeInUpAndOut__BYIBO"}},25432:function(e){e.exports={dismissableContainer:"Dismissable_dismissableContainer__4Q5Jv",dismissButton:"Dismissable_dismissButton__faL3Y",icon:"Dismissable_icon__nU8Xb"}},71953:function(e){e.exports={growWrap:"GrowingTextArea_growWrap__im5W3",textArea:"GrowingTextArea_textArea__ZWQbP"}},15490:function(e){e.exports={banner:"WarningBanner_banner__otlmq"}}}]);